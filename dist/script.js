(()=>{var n={273:()=>{var e=document.querySelector("body"),n=document.querySelectorAll(".side-key"),t=document.querySelectorAll(".side-key-rus"),s=document.querySelectorAll(".key"),a=document.querySelector(".keyboard"),o=document.querySelector(".textarea"),i=document.querySelector(".main");document.querySelector("div.dark-theme > label > input[type=checkbox]").addEventListener("change",(function(){s.forEach((function(e){e.classList.toggle("dark-theme-keys")})),n.forEach((function(e){e.classList.toggle("dark-theme-side-key")})),t.forEach((function(e){e.classList.toggle("dark-theme-side-key")})),a.classList.toggle("dark-theme-keyboard"),e.classList.toggle("dark-theme-bg"),i.classList.toggle("dark-theme-main"),o.classList.toggle("dark-theme-textarea")}))},753:()=>{var e=document.querySelector("div.info > img"),n=document.querySelector(".info-modal"),t=document.querySelector(".modal-background"),s=document.querySelector(".close>img");e.addEventListener("click",(function(){n.classList.remove("disabled-modal"),t.classList.remove("disabled-modal")})),s.addEventListener("click",(function(){n.classList.add("disabled-modal"),t.classList.add("disabled-modal")})),t.addEventListener("click",(function(){n.classList.add("disabled-modal"),t.classList.add("disabled-modal")}))},84:()=>{window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;var n=new SpeechRecognition;n.interimResults=!0,n.continuous=!0,n.lang="en-gb",document.querySelector("div.key.win").addEventListener("click",(function(){languageEnglish?n.lang="en-gb":n.lang="ru"})),n.addEventListener("result",(function(){var n=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");textarea.value=n}));var t=document.querySelector(".microphone > img");t.addEventListener("click",(function(){t.classList.contains("off")?(t.src="assets/icons/microphone.svg",t.classList.remove("off"),n.start()):(n.stop(),t.src="assets/icons/microphone-off.svg",t.classList.add("off"))}))},669:()=>{var e=document.querySelector(".keyboard");document.querySelector("input[type=checkbox]").addEventListener("change",(function(n){n.target.checked?e.classList.remove("keyboard-off"):e.classList.add("keyboard-off")}))}},t={};function s(e){if(t[e])return t[e].exports;var a=t[e]={exports:{}};return n[e](a,a.exports,s),a.exports}(()=>{"use strict";function e(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var n=function(){function n(e,t,s,a){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.main=e,this.side=t,this.mainRus=s,this.sideRus=a}var t,s;return t=n,(s=[{key:"render",value:function(){return'\n      <div class="key">\n        <span class="side-key">'.concat(this.side,'</span>\n        <span class="main-key">').concat(this.main,'</span>\n        <span class="side-key-rus disabled">').concat(this.sideRus,'</span>\n        <span class="main-key-rus disabled">').concat(this.mainRus,"</span>\n      </div>")}}])&&e(t.prototype,s),n}();function t(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=n}var n,s;return n=e,(s=[{key:"render",value:function(){return'\n      <div class="key '.concat(this.content.toLowerCase(),'">\n        <span>').concat(this.content,"</span>\n      </div>")}}])&&t(n.prototype,s),e}(),o=[["~","!","@","#","$","%","^","&","*","(",")","_","+","|","Backspace"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","Delete"],["CapsLock","A","S","D","F","G","H","J","K","L",":",'"',"Enter"],["Shift","Z","X","C","V","B","N","M","<",">","?","Up","Shift"],["Ctrl","Win","Alt","Space","Alt","Left","Down","Right","Ctrl"]],i=[["`","1","2","3","4","5","6","7","8","9","0","-","=","\\",null],[null,"q","w","e","r","t","y","u","i","o","p","[","]",null],[null,"a","s","d","f","g","h","j","k","l",";","'",null],[null,"z","x","c","v","b","n","m",",",".","/",null]],c=[["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","/",null],[null,"Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ",null],[null,"Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э",null],[null,"Я","Ч","С","М","И","Т","Ь","Б","Ю",",",null]],l=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","\\",null],[null,"й","ц","у","к","е","н","г","ш","щ","з","х","ъ",null],[null,"ф","ы","в","а","п","р","о","л","д","ж","э",null],[null,"я","ч","с","м","и","т","ь","б","ю",".",null]];!function(){var e=document.createElement("div");e.classList.add("keyboard","keyboard-off");for(var t=0;t<o.length;t+=1){var s=document.createElement("div");switch(t){case 0:s.classList.add("keyboard__row-first");break;case 1:s.classList.add("keyboard__row-second");break;case 2:s.classList.add("keyboard__row-third");break;case 3:s.classList.add("keyboard__row-fourth");break;case 4:s.classList.add("keyboard__row-fifth")}for(var r=0;r<o[t].length;r+=1)if(1===o[t][r].length){var u=new n(i[t][r],o[t][r],l[t][r],c[t][r]);s.innerHTML+=u.render()}else if("Win"===o[t][r])s.innerHTML+='\n          <div class="key win">\n            <span>Win</span>\n            <span class="language-side">Ru</span>\n            <span class="language">En</span>\n          </div>';else{var d=new a(o[t][r]);s.innerHTML+=d.render()}e.appendChild(s)}document.querySelector(".main").appendChild(e)}();var r=document.querySelector(".textarea"),u=document.querySelectorAll(".key"),d={sound:!0,shift:!1,englishLayout:!0},f=new Audio("assets/sounds/simple.wav"),y=new Audio("assets/sounds/key.wav"),v=new Audio("assets/sounds/key-simple-rus.wav"),g=new Audio("assets/sounds/key-rus.wav"),k=function(){document.querySelectorAll(".key").forEach((function(e){if(e.querySelector(".side-key")){var n=e.querySelector(".side-key"),t=e.querySelector(".main-key"),s=e.querySelector(".side-key-rus"),a=e.querySelector(".main-key-rus"),o=[n.innerHTML,t.innerHTML];t.innerHTML=o[0],n.innerHTML=o[1];var i=[s.innerHTML,a.innerHTML];a.innerHTML=i[0],s.innerHTML=i[1]}}))},m=function(){var e=document.querySelectorAll(".key");e[42].classList.toggle("active"),e[54].classList.toggle("active"),d.shift=!d.shift},h=function(e){r.setRangeText("".concat(e),r.selectionStart,r.selectionEnd,"end"),r.focus()},L=function(e){r.setRangeText(e,r.selectionStart,r.selectionEnd,"end"),r.focus()},S=function(){d.englishLayout?y.play():g.play()};u.forEach((function(e){e.addEventListener("click",(function(n){switch(n.target.innerText){case"Ru":case"En":case"Win":d.sound&&g.play(),function(){var e=document.querySelectorAll(".side-key"),n=document.querySelectorAll(".main-key"),t=document.querySelectorAll(".side-key-rus"),s=document.querySelectorAll(".main-key-rus"),a=document.querySelector(".language"),o=document.querySelector(".language-side"),i=[o.innerText,a.innerText];a.innerText=i[0],o.innerText=i[1];for(var c=0;c<e.length;c+=1)e[c].classList.toggle("disabled"),n[c].classList.toggle("disabled"),t[c].classList.toggle("disabled"),s[c].classList.toggle("disabled");d.englishLayout=!d.englishLayout}();break;case"Tab":d.sound&&S(),h("    ");break;case"Backspace":d.sound&&S(),a=r.value.slice(0,r.selectionStart),o=r.value.slice(r.selectionEnd),i=r.selectionStart,r.value=a.slice(0,-1)+o,r.focus(),i>0?r.setSelectionRange(i-1,i-1):r.setSelectionRange(i,i);break;case"Delete":d.sound&&S(),function(){var e=r.value.slice(0,r.selectionStart),n=r.value.slice(r.selectionEnd),t=r.selectionStart;r.value=e+n.slice(1),r.focus(),r.value.length,r.setSelectionRange(t,t)}();break;case"CapsLock":d.sound&&S(),k(),e.classList.toggle("active");break;case"Enter":d.sound&&S(),h("\n");break;case"Shift":d.sound&&S(),k(),m();break;case"Ctrl":case"Alt":d.sound&&S();break;case"Space":d.sound&&(d.englishLayout?f.play():v.play()),h(" ");break;case"Left":d.sound&&S(),function(){var e=r.selectionStart;r.focus(),e>0?r.setSelectionRange(e-1,e-1):r.setSelectionRange(e,e)}();break;case"Right":d.sound&&S(),function(){var e=r.selectionStart;r.focus(),e<r.value.length?r.setSelectionRange(e+1,e+1):r.setSelectionRange(e,e)}();break;case"Up":d.sound&&S(),function(){var e=r.selectionStart;if(r.focus(),e>0){var n=r.value.slice(0,r.selectionStart).length;r.setSelectionRange(e-n,e-n)}else r.setSelectionRange(e,e)}();break;case"Down":d.sound&&S(),function(){var e=r.selectionStart;if(r.focus(),e<r.value.length){var n=r.value.slice(r.selectionEnd).length;r.setSelectionRange(e+n,e+n)}else r.setSelectionRange(e,e)}();break;default:if(d.englishLayout){d.sound&&f.play();var t=e.querySelector(".main-key");L(t.innerText)}else{d.sound&&v.play();var s=e.querySelector(".main-key-rus");L(s.innerText)}d.shift&&(k(),m(),d.shift=!1)}var a,o,i}))}));var p=[192,49,50,51,52,53,54,55,56,57,48,189,187,220,8,9,81,87,69,82,84,89,85,73,79,80,219,221,46,20,65,83,68,70,71,72,74,75,76,186,222,13,16,90,88,67,86,66,78,77,188,190,191,38,16,17,null,18,32,18,37,40,39,17];r.addEventListener("keydown",(function(e){for(var n=0;n<p.length;n+=1){if(e.keyCode===p[n]&&(42===n||55===n||57===n)&&1===e.location){u[n].classList.add("active");break}if(e.keyCode===p[n]&&(54===n||59===n||63===n)&&2===e.location){u[n].classList.add("active");break}e.keyCode===p[n]&&0===e.location&&u[n].classList.add("active")}})),r.addEventListener("keyup",(function(e){for(var n=0;n<p.length;n+=1)e.keyCode===p[n]&&u[n].classList.remove("active")}));var b=document.querySelector(".sound > img");b.addEventListener("click",(function(){b.classList.contains("off")?b.src="assets/icons/volume.svg":b.src="assets/icons/volume-off.svg",d.sound=!d.sound,b.classList.toggle("off")})),s(273),s(84),s(753),s(669)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvZGFyay10aGVtZS5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL3NwZWVjaC5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvdHVybktleWJvYXJkLmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvY29tcG9uZW50cy9tYWluS2V5LmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC8uL3NyYy9qcy9jb21wb25lbnRzL3NpZGVLZXkuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL2NvbXBvbmVudHMva2V5Ym9hcmQuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL3NjcmlwdC5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvcmVhbEtleWJvYXJkLmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC8uL3NyYy9qcy90dXJuU291bmQuanMiXSwibmFtZXMiOlsiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNpZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2lkZVJ1cyIsImtleXMiLCJrZXlib2FyZCIsInRleHRhcmVhIiwibWFpbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JFYWNoIiwia2V5IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibW9kYWxXaW5kb3dCdXR0b24iLCJtb2RhbFdpbmRvdyIsIm1vZGFsV2luZG93QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCdXR0b24iLCJyZW1vdmUiLCJhZGQiLCJ3aW5kb3ciLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwicmVjIiwiaW50ZXJpbVJlc3VsdHMiLCJjb250aW51b3VzIiwibGFuZyIsImxhbmd1YWdlRW5nbGlzaCIsInRleHQiLCJBcnJheSIsImZyb20iLCJlIiwicmVzdWx0cyIsIm1hcCIsInJlc3VsdCIsInRyYW5zY3JpcHQiLCJqb2luIiwidmFsdWUiLCJtaWNyb3Bob25lQnV0dG9uIiwiY29udGFpbnMiLCJzcmMiLCJzdGFydCIsInN0b3AiLCJldmVudCIsInRhcmdldCIsImNoZWNrZWQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIk1haW5LZXkiLCJtYWluUnVzIiwidGhpcyIsIlNpZGVLZXkiLCJjb250ZW50IiwidG9Mb3dlckNhc2UiLCJzaWRlS2V5cyIsIm1haW5LZXlzIiwic2lkZUtleXNSdXMiLCJtYWluS2V5c1J1cyIsImNyZWF0ZUVsZW1lbnQiLCJpIiwibGVuZ3RoIiwicm93IiwiaiIsImlubmVySFRNTCIsInJlbmRlciIsImFwcGVuZENoaWxkIiwiY3JlYXRlS2V5Ym9hcmQiLCJzdGF0ZSIsInNvdW5kIiwic2hpZnQiLCJlbmdsaXNoTGF5b3V0IiwiYXVkaW9TaW1wbGUiLCJBdWRpbyIsImF1ZGlvIiwiYXVkaW9TaW1wbGVSdXMiLCJhdWRpb1J1cyIsImNoYW5nZUNhc2UiLCJzaWRlS2V5IiwibWFpbktleSIsInNpZGVLZXlSdXMiLCJtYWluS2V5UnVzIiwia2V5c0FsbCIsInNldFNwYWNlIiwic3BhY2UiLCJzZXRSYW5nZVRleHQiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsImZvY3VzIiwid3JpdGVMZXR0ZXIiLCJjaGFyIiwicGxheVNwZWNpYWxTb3VuZCIsInBsYXkiLCJpbm5lclRleHQiLCJsYW5ndWFnZSIsImxhbmd1YWdlU2lkZSIsImNoYW5nZUxhbmd1YWdlIiwiZmlyc3RTdHJpbmciLCJzbGljZSIsInNlY29uZFN0cmluZyIsInBvc2l0aW9uRm9jdXMiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImRlbGV0ZUJ1dHRvbiIsImxlZnQiLCJyaWdodCIsImNvdW50IiwidXAiLCJkb3duIiwic3BhbiIsImtleXNLZXlDb2RlIiwia2V5Q29kZSIsImxvY2F0aW9uIiwic291bmRCdXR0b24iXSwibWFwcGluZ3MiOiJzQkFBQSxJQUFNQSxFQUFPQyxTQUFTQyxjQUFjLFFBQzlCQyxFQUFPRixTQUFTRyxpQkFBaUIsYUFDakNDLEVBQVVKLFNBQVNHLGlCQUFpQixpQkFDcENFLEVBQU9MLFNBQVNHLGlCQUFpQixRQUNqQ0csRUFBV04sU0FBU0MsY0FBYyxhQUNsQ00sRUFBV1AsU0FBU0MsY0FBYyxhQUNsQ08sRUFBT1IsU0FBU0MsY0FBYyxTQUVwQ0QsU0FBU0MsY0FBYyxpREFBaURRLGlCQUFpQixVQUFVLFdBQ2pHSixFQUFLSyxTQUFRLFNBQUNDLEdBQ1pBLEVBQUlDLFVBQVVDLE9BQU8sc0JBR3ZCWCxFQUFLUSxTQUFRLFNBQUNDLEdBQ1pBLEVBQUlDLFVBQVVDLE9BQU8sMEJBR3ZCVCxFQUFRTSxTQUFRLFNBQUNDLEdBQ2ZBLEVBQUlDLFVBQVVDLE9BQU8sMEJBR3ZCUCxFQUFTTSxVQUFVQyxPQUFPLHVCQUMxQmQsRUFBS2EsVUFBVUMsT0FBTyxpQkFDdEJMLEVBQUtJLFVBQVVDLE9BQU8sbUJBQ3RCTixFQUFTSyxVQUFVQyxPQUFPLDJCLFNDeEI1QixJQUFNQyxFQUFvQmQsU0FBU0MsY0FBYyxrQkFDM0NjLEVBQWNmLFNBQVNDLGNBQWMsZUFDckNlLEVBQXdCaEIsU0FBU0MsY0FBYyxxQkFDL0NnQixFQUFtQmpCLFNBQVNDLGNBQWMsY0FFaERhLEVBQWtCTCxpQkFBaUIsU0FBUyxXQUMxQ00sRUFBWUgsVUFBVU0sT0FBTyxrQkFDN0JGLEVBQXNCSixVQUFVTSxPQUFPLHFCQUd6Q0QsRUFBaUJSLGlCQUFpQixTQUFTLFdBQ3pDTSxFQUFZSCxVQUFVTyxJQUFJLGtCQUMxQkgsRUFBc0JKLFVBQVVPLElBQUkscUJB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SSxHQUFJLEdBQUksR0FBSSxJQUV0RHpHLG1CQUEwQixXQUFXLFNBQUNvQyxHQUNwQyxJQUFLLElBQUlvQixFQUFJLEVBQUdBLEVBQUlpRCxFQUFZaEQsT0FBUUQsR0FBSyxFQUFHLENBQzlDLEdBQUlwQixFQUFNc0UsVUFBWUQsRUFBWWpELEtBQWEsS0FBTkEsR0FBa0IsS0FBTkEsR0FBa0IsS0FBTkEsSUFDM0MsSUFBbkJwQixFQUFNdUUsU0FBZ0IsQ0FDdkI3RyxFQUFLMEQsR0FBR25ELFVBQVVPLElBQUksVUFDdEIsTUFDSyxHQUFJd0IsRUFBTXNFLFVBQVlELEVBQVlqRCxLQUFhLEtBQU5BLEdBQWtCLEtBQU5BLEdBQWtCLEtBQU5BLElBQ2xELElBQW5CcEIsRUFBTXVFLFNBQWdCLENBQ3ZCN0csRUFBSzBELEdBQUduRCxVQUFVTyxJQUFJLFVBQ3RCLE1BQ1N3QixFQUFNc0UsVUFBWUQsRUFBWWpELElBQXlCLElBQW5CcEIsRUFBTXVFLFVBQ25EN0csRUFBSzBELEdBQUduRCxVQUFVTyxJQUFJLGNBSzVCWixtQkFBMEIsU0FBUyxTQUFDb0MsR0FDbEMsSUFBSyxJQUFJb0IsRUFBSSxFQUFHQSxFQUFJaUQsRUFBWWhELE9BQVFELEdBQUssRUFDdkNwQixFQUFNc0UsVUFBWUQsRUFBWWpELElBQ2hDMUQsRUFBSzBELEdBQUduRCxVQUFVTSxPQUFPLGFDeEIvQixJQUFNaUcsRUFBY25ILFNBQVNDLGNBQWMsZ0JBRTNDa0gsRUFBWTFHLGlCQUFpQixTQUFTLFdBQ2hDMEcsRUFBWXZHLFVBQVUyQixTQUFTLE9BQ2pDNEUsRUFBWTNFLElBQU0sMEJBRWxCMkUsRUFBWTNFLElBQU0sOEJBRXBCK0IsU0FBZUEsRUFBTUMsTUFDckIyQyxFQUFZdkcsVUFBVUMsT0FBTyxVIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5jb25zdCBzaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUta2V5Jyk7XG5jb25zdCBzaWRlUnVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUta2V5LXJ1cycpO1xuY29uc3Qga2V5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5rZXknKTtcbmNvbnN0IGtleWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkJyk7XG5jb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0YXJlYScpO1xuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5kYXJrLXRoZW1lID4gbGFiZWwgPiBpbnB1dFt0eXBlPWNoZWNrYm94XScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBrZXkuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1rZXlzJyk7XG4gIH0pO1xuXG4gIHNpZGUuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAga2V5LmNsYXNzTGlzdC50b2dnbGUoJ2RhcmstdGhlbWUtc2lkZS1rZXknKTtcbiAgfSk7XG5cbiAgc2lkZVJ1cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBrZXkuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1zaWRlLWtleScpO1xuICB9KTtcblxuICBrZXlib2FyZC5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLWtleWJvYXJkJyk7XG4gIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1iZycpO1xuICBtYWluLmNsYXNzTGlzdC50b2dnbGUoJ2RhcmstdGhlbWUtbWFpbicpO1xuICB0ZXh0YXJlYS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLXRleHRhcmVhJyk7XG59KTtcbiIsImNvbnN0IG1vZGFsV2luZG93QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmluZm8gPiBpbWcnKTtcbmNvbnN0IG1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm8tbW9kYWwnKTtcbmNvbnN0IG1vZGFsV2luZG93QmFja2dyb3VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1iYWNrZ3JvdW5kJyk7XG5jb25zdCBjbG9zZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlPmltZycpO1xuXG5tb2RhbFdpbmRvd0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQtbW9kYWwnKTtcbiAgbW9kYWxXaW5kb3dCYWNrZ3JvdW5kLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkLW1vZGFsJyk7XG59KTtcblxuY2xvc2VNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQtbW9kYWwnKTtcbiAgbW9kYWxXaW5kb3dCYWNrZ3JvdW5kLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkLW1vZGFsJyk7XG59KTtcblxubW9kYWxXaW5kb3dCYWNrZ3JvdW5kLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZC1tb2RhbCcpO1xuICBtb2RhbFdpbmRvd0JhY2tncm91bmQuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQtbW9kYWwnKTtcbn0pO1xuIiwid2luZG93LlNwZWVjaFJlY29nbml0aW9uID0gd2luZG93LlNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbjtcblxuY29uc3QgcmVjID0gbmV3IFNwZWVjaFJlY29nbml0aW9uKCk7XG5yZWMuaW50ZXJpbVJlc3VsdHMgPSB0cnVlO1xucmVjLmNvbnRpbnVvdXMgPSB0cnVlO1xucmVjLmxhbmcgPSAnZW4tZ2InO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYua2V5LndpbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpZiAobGFuZ3VhZ2VFbmdsaXNoKSB7XG4gICAgcmVjLmxhbmcgPSAnZW4tZ2InO1xuICB9IGVsc2Uge1xuICAgIHJlYy5sYW5nID0gJ3J1JztcbiAgfVxufSk7XG5cbnJlYy5hZGRFdmVudExpc3RlbmVyKCdyZXN1bHQnLCAoKSA9PiB7XG4gIGNvbnN0IHRleHQgPSBBcnJheS5mcm9tKGUucmVzdWx0cylcbiAgICAubWFwKHJlc3VsdCA9PiByZXN1bHRbMF0pXG4gICAgLm1hcChyZXN1bHQgPT4gcmVzdWx0LnRyYW5zY3JpcHQpXG4gICAgLmpvaW4oJycpO1xuICB0ZXh0YXJlYS52YWx1ZSA9IHRleHQ7XG59KTtcblxuY29uc3QgbWljcm9waG9uZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5taWNyb3Bob25lID4gaW1nJyk7XG5taWNyb3Bob25lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpZiAobWljcm9waG9uZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29mZicpKSB7XG4gICAgbWljcm9waG9uZUJ1dHRvbi5zcmMgPSAnYXNzZXRzL2ljb25zL21pY3JvcGhvbmUuc3ZnJztcbiAgICBtaWNyb3Bob25lQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29mZicpO1xuICAgIHJlYy5zdGFydCgpO1xuICB9IGVsc2Uge1xuICAgIHJlYy5zdG9wKCk7XG4gICAgbWljcm9waG9uZUJ1dHRvbi5zcmMgPSAnYXNzZXRzL2ljb25zL21pY3JvcGhvbmUtb2ZmLnN2Zyc7XG4gICAgbWljcm9waG9uZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdvZmYnKTtcbiAgfVxufSk7XG4iLCJjb25zdCBrZXlib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rZXlib2FyZCcpO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICBrZXlib2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdrZXlib2FyZC1vZmYnKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlib2FyZC5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZC1vZmYnKTtcbiAgfVxufSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5LZXkge1xuICBjb25zdHJ1Y3RvcihtYWluLCBzaWRlLCBtYWluUnVzLCBzaWRlUnVzKSB7XG4gICAgdGhpcy5tYWluID0gbWFpbjtcbiAgICB0aGlzLnNpZGUgPSBzaWRlO1xuICAgIHRoaXMubWFpblJ1cyA9IG1haW5SdXM7XG4gICAgdGhpcy5zaWRlUnVzID0gc2lkZVJ1cztcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImtleVwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNpZGUta2V5XCI+JHt0aGlzLnNpZGV9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cIm1haW4ta2V5XCI+JHt0aGlzLm1haW59PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNpZGUta2V5LXJ1cyBkaXNhYmxlZFwiPiR7dGhpcy5zaWRlUnVzfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJtYWluLWtleS1ydXMgZGlzYWJsZWRcIj4ke3RoaXMubWFpblJ1c308L3NwYW4+XG4gICAgICA8L2Rpdj5gO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTaWRlS2V5IHtcbiAgY29uc3RydWN0b3IoY29udGVudCkge1xuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJrZXkgJHt0aGlzLmNvbnRlbnQudG9Mb3dlckNhc2UoKX1cIj5cbiAgICAgICAgPHNwYW4+JHt0aGlzLmNvbnRlbnR9PC9zcGFuPlxuICAgICAgPC9kaXY+YDtcbiAgfVxufVxuIiwiaW1wb3J0IE1haW5LZXkgZnJvbSAnLi9tYWluS2V5JztcbmltcG9ydCBTaWRlS2V5IGZyb20gJy4vc2lkZUtleSc7XG5cbmNvbnN0IHNpZGVLZXlzID0gW1xuICBbJ34nLCAnIScsICdAJywgJyMnLCAnJCcsICclJywgJ14nLCAnJicsICcqJywgJygnLCAnKScsICdfJywgJysnLCAnfCcsICdCYWNrc3BhY2UnXSxcbiAgWydUYWInLCAnUScsICdXJywgJ0UnLCAnUicsICdUJywgJ1knLCAnVScsICdJJywgJ08nLCAnUCcsICd7JywgJ30nLCAnRGVsZXRlJ10sXG4gIFsnQ2Fwc0xvY2snLCAnQScsICdTJywgJ0QnLCAnRicsICdHJywgJ0gnLCAnSicsICdLJywgJ0wnLCAnOicsICdcIicsICdFbnRlciddLFxuICBbJ1NoaWZ0JywgJ1onLCAnWCcsICdDJywgJ1YnLCAnQicsICdOJywgJ00nLCAnPCcsICc+JywgJz8nLCAnVXAnLCAnU2hpZnQnXSxcbiAgWydDdHJsJywgJ1dpbicsICdBbHQnLCAnU3BhY2UnLCAnQWx0JywgJ0xlZnQnLCAnRG93bicsICdSaWdodCcsICdDdHJsJ10sXG5dO1xuXG5jb25zdCBtYWluS2V5cyA9IFtcbiAgWydgJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgJ1xcXFwnLCBudWxsXSxcbiAgW251bGwsICdxJywgJ3cnLCAnZScsICdyJywgJ3QnLCAneScsICd1JywgJ2knLCAnbycsICdwJywgJ1snLCAnXScsIG51bGxdLFxuICBbbnVsbCwgJ2EnLCAncycsICdkJywgJ2YnLCAnZycsICdoJywgJ2onLCAnaycsICdsJywgJzsnLCAnXFwnJywgbnVsbF0sXG4gIFtudWxsLCAneicsICd4JywgJ2MnLCAndicsICdiJywgJ24nLCAnbScsICcsJywgJy4nLCAnLycsIG51bGxdLFxuXTtcblxuY29uc3Qgc2lkZUtleXNSdXMgPSBbXG4gIFsn0IEnLCAnIScsICdcIicsICfihJYnLCAnOycsICclJywgJzonLCAnPycsICcqJywgJygnLCAnKScsICdfJywgJysnLCAnLycsIG51bGxdLFxuICBbbnVsbCwgJ9CZJywgJ9CmJywgJ9CjJywgJ9CaJywgJ9CVJywgJ9CdJywgJ9CTJywgJ9CoJywgJ9CpJywgJ9CXJywgJ9ClJywgJ9CqJywgbnVsbF0sXG4gIFtudWxsLCAn0KQnLCAn0KsnLCAn0JInLCAn0JAnLCAn0J8nLCAn0KAnLCAn0J4nLCAn0JsnLCAn0JQnLCAn0JYnLCAn0K0nLCBudWxsXSxcbiAgW251bGwsICfQrycsICfQpycsICfQoScsICfQnCcsICfQmCcsICfQoicsICfQrCcsICfQkScsICfQricsICcsJywgbnVsbF0sXG5dO1xuXG5jb25zdCBtYWluS2V5c1J1cyA9IFtcbiAgWyfRkScsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywgJy0nLCAnPScsICdcXFxcJywgbnVsbF0sXG4gIFtudWxsLCAn0LknLCAn0YYnLCAn0YMnLCAn0LonLCAn0LUnLCAn0L0nLCAn0LMnLCAn0YgnLCAn0YknLCAn0LcnLCAn0YUnLCAn0YonLCBudWxsXSxcbiAgW251bGwsICfRhCcsICfRiycsICfQsicsICfQsCcsICfQvycsICfRgCcsICfQvicsICfQuycsICfQtCcsICfQticsICfRjScsIG51bGxdLFxuICBbbnVsbCwgJ9GPJywgJ9GHJywgJ9GBJywgJ9C8JywgJ9C4JywgJ9GCJywgJ9GMJywgJ9CxJywgJ9GOJywgJy4nLCBudWxsXSxcbl07XG5cbmNvbnN0IGNyZWF0ZUtleWJvYXJkID0gKCkgPT4ge1xuICBjb25zdCBrZXlib2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBrZXlib2FyZC5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZCcsICdrZXlib2FyZC1vZmYnKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWRlS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHN3aXRjaCAoaSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX3Jvdy1maXJzdCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkX19yb3ctc2Vjb25kJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX3Jvdy10aGlyZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkX19yb3ctZm91cnRoJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX3Jvdy1maWZ0aCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2lkZUtleXNbaV0ubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgIGlmIChzaWRlS2V5c1tpXVtqXS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmV3IE1haW5LZXkobWFpbktleXNbaV1bal0sIHNpZGVLZXlzW2ldW2pdLFxuICAgICAgICAgIG1haW5LZXlzUnVzW2ldW2pdLCBzaWRlS2V5c1J1c1tpXVtqXSk7XG4gICAgICAgIHJvdy5pbm5lckhUTUwgKz0ga2V5LnJlbmRlcigpO1xuICAgICAgfSBlbHNlIGlmIChzaWRlS2V5c1tpXVtqXSA9PT0gJ1dpbicpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJrZXkgd2luXCI+XG4gICAgICAgICAgICA8c3Bhbj5XaW48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhbmd1YWdlLXNpZGVcIj5SdTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFuZ3VhZ2VcIj5Fbjwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5gO1xuICAgICAgICByb3cuaW5uZXJIVE1MICs9IGtleTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5ldyBTaWRlS2V5KHNpZGVLZXlzW2ldW2pdKTtcbiAgICAgICAgcm93LmlubmVySFRNTCArPSBrZXkucmVuZGVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGtleWJvYXJkLmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpLmFwcGVuZENoaWxkKGtleWJvYXJkKTtcbn07XG5cbmNyZWF0ZUtleWJvYXJkKCk7XG4iLCJleHBvcnQgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dGFyZWEnKTtcbmV4cG9ydCBjb25zdCBrZXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuXG5leHBvcnQgY29uc3Qgc3RhdGUgPSB7XG4gIHNvdW5kOiB0cnVlLFxuICBzaGlmdDogZmFsc2UsXG4gIGVuZ2xpc2hMYXlvdXQ6IHRydWUsXG59O1xuXG5jb25zdCBhdWRpb1NpbXBsZSA9IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy9zaW1wbGUud2F2Jyk7XG5jb25zdCBhdWRpbyA9IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy9rZXkud2F2Jyk7XG5jb25zdCBhdWRpb1NpbXBsZVJ1cyA9IG5ldyBBdWRpbygnYXNzZXRzL3NvdW5kcy9rZXktc2ltcGxlLXJ1cy53YXYnKTtcbmNvbnN0IGF1ZGlvUnVzID0gbmV3IEF1ZGlvKCdhc3NldHMvc291bmRzL2tleS1ydXMud2F2Jyk7XG5cbmNvbnN0IGNoYW5nZUxhbmd1YWdlID0gKCkgPT4ge1xuICBjb25zdCBzaWRlS2V5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWtleScpO1xuICBjb25zdCBtYWluS2V5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLWtleScpO1xuICBjb25zdCBzaWRlS2V5c1J1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWtleS1ydXMnKTtcbiAgY29uc3QgbWFpbktleXNSdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1rZXktcnVzJyk7XG5cbiAgY29uc3QgbGFuZ3VhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFuZ3VhZ2UnKTtcbiAgY29uc3QgbGFuZ3VhZ2VTaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxhbmd1YWdlLXNpZGUnKTtcbiAgW2xhbmd1YWdlLmlubmVyVGV4dCwgbGFuZ3VhZ2VTaWRlLmlubmVyVGV4dF0gPSBbbGFuZ3VhZ2VTaWRlLmlubmVyVGV4dCwgbGFuZ3VhZ2UuaW5uZXJUZXh0XTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpZGVLZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgc2lkZUtleXNbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKTtcbiAgICBtYWluS2V5c1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpO1xuICAgIHNpZGVLZXlzUnVzW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJyk7XG4gICAgbWFpbktleXNSdXNbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKTtcbiAgfVxuICBzdGF0ZS5lbmdsaXNoTGF5b3V0ID0gIXN0YXRlLmVuZ2xpc2hMYXlvdXQ7XG59O1xuXG5jb25zdCBiYWNrc3BhY2UgPSAoKSA9PiB7XG4gIGNvbnN0IGZpcnN0U3RyaW5nID0gdGV4dGFyZWEudmFsdWUuc2xpY2UoMCwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQpO1xuICBjb25zdCBzZWNvbmRTdHJpbmcgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSh0ZXh0YXJlYS5zZWxlY3Rpb25FbmQpO1xuICBjb25zdCBwb3NpdGlvbkZvY3VzID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG5cbiAgdGV4dGFyZWEudmFsdWUgPSBmaXJzdFN0cmluZy5zbGljZSgwLCAtMSkgKyBzZWNvbmRTdHJpbmc7XG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzID4gMCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMgLSAxLCBwb3NpdGlvbkZvY3VzIC0gMSk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IGRlbGV0ZUJ1dHRvbiA9ICgpID0+IHtcbiAgY29uc3QgZmlyc3RTdHJpbmcgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSgwLCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCk7XG4gIGNvbnN0IHNlY29uZFN0cmluZyA9IHRleHRhcmVhLnZhbHVlLnNsaWNlKHRleHRhcmVhLnNlbGVjdGlvbkVuZCk7XG4gIGNvbnN0IHBvc2l0aW9uRm9jdXMgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydDtcblxuICB0ZXh0YXJlYS52YWx1ZSA9IGZpcnN0U3RyaW5nICsgc2Vjb25kU3RyaW5nLnNsaWNlKDEpO1xuICB0ZXh0YXJlYS5mb2N1cygpO1xuICBpZiAocG9zaXRpb25Gb2N1cyA8IHRleHRhcmVhLnZhbHVlLmxlbmd0aCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9IGVsc2Uge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9XG59O1xuXG5jb25zdCBjaGFuZ2VDYXNlID0gKCkgPT4ge1xuICBjb25zdCBrZXlzQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuICBrZXlzQWxsLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChrZXkucXVlcnlTZWxlY3RvcignLnNpZGUta2V5JykpIHtcbiAgICAgIGNvbnN0IHNpZGVLZXkgPSBrZXkucXVlcnlTZWxlY3RvcignLnNpZGUta2V5Jyk7XG4gICAgICBjb25zdCBtYWluS2V5ID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleScpO1xuICAgICAgY29uc3Qgc2lkZUtleVJ1cyA9IGtleS5xdWVyeVNlbGVjdG9yKCcuc2lkZS1rZXktcnVzJyk7XG4gICAgICBjb25zdCBtYWluS2V5UnVzID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleS1ydXMnKTtcblxuICAgICAgW21haW5LZXkuaW5uZXJIVE1MLCBzaWRlS2V5LmlubmVySFRNTF0gPSBbc2lkZUtleS5pbm5lckhUTUwsIG1haW5LZXkuaW5uZXJIVE1MXTtcbiAgICAgIFttYWluS2V5UnVzLmlubmVySFRNTCwgc2lkZUtleVJ1cy5pbm5lckhUTUxdID0gW3NpZGVLZXlSdXMuaW5uZXJIVE1MLCBtYWluS2V5UnVzLmlubmVySFRNTF07XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IHNoaWZ0ID0gKCkgPT4ge1xuICBjb25zdCBrZXlzQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuICBrZXlzQWxsWzQyXS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAga2V5c0FsbFs1NF0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gIHN0YXRlLnNoaWZ0ID0gIXN0YXRlLnNoaWZ0O1xufTtcblxuY29uc3QgbGVmdCA9ICgpID0+IHtcbiAgY29uc3QgcG9zaXRpb25Gb2N1cyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuXG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzID4gMCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMgLSAxLCBwb3NpdGlvbkZvY3VzIC0gMSk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IHJpZ2h0ID0gKCkgPT4ge1xuICBjb25zdCBwb3NpdGlvbkZvY3VzID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgaWYgKHBvc2l0aW9uRm9jdXMgPCB0ZXh0YXJlYS52YWx1ZS5sZW5ndGgpIHtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzICsgMSwgcG9zaXRpb25Gb2N1cyArIDEpO1xuICB9IGVsc2Uge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9XG59O1xuXG5jb25zdCB1cCA9ICgpID0+IHtcbiAgY29uc3QgcG9zaXRpb25Gb2N1cyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuXG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzID4gMCkge1xuICAgIGNvbnN0IGNvdW50ID0gdGV4dGFyZWEudmFsdWUuc2xpY2UoMCwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQpLmxlbmd0aDtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzIC0gY291bnQsIHBvc2l0aW9uRm9jdXMgLSBjb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IGRvd24gPSAoKSA9PiB7XG4gIGNvbnN0IHBvc2l0aW9uRm9jdXMgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydDtcblxuICB0ZXh0YXJlYS5mb2N1cygpO1xuICBpZiAocG9zaXRpb25Gb2N1cyA8IHRleHRhcmVhLnZhbHVlLmxlbmd0aCkge1xuICAgIGNvbnN0IGNvdW50ID0gdGV4dGFyZWEudmFsdWUuc2xpY2UodGV4dGFyZWEuc2VsZWN0aW9uRW5kKS5sZW5ndGg7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cyArIGNvdW50LCBwb3NpdGlvbkZvY3VzICsgY291bnQpO1xuICB9IGVsc2Uge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9XG59O1xuXG5jb25zdCBzZXRTcGFjZSA9IChzcGFjZSkgPT4ge1xuICB0ZXh0YXJlYS5zZXRSYW5nZVRleHQoYCR7c3BhY2V9YCwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsIHRleHRhcmVhLnNlbGVjdGlvbkVuZCwgJ2VuZCcpO1xuICB0ZXh0YXJlYS5mb2N1cygpO1xufTtcblxuY29uc3Qgd3JpdGVMZXR0ZXIgPSAoY2hhcikgPT4ge1xuICB0ZXh0YXJlYS5zZXRSYW5nZVRleHQoY2hhciwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsIHRleHRhcmVhLnNlbGVjdGlvbkVuZCwgJ2VuZCcpO1xuICB0ZXh0YXJlYS5mb2N1cygpO1xufTtcblxuY29uc3QgcGxheVNvdW5kID0gKCkgPT4ge1xuICBpZiAoc3RhdGUuZW5nbGlzaExheW91dCkge1xuICAgIGF1ZGlvU2ltcGxlLnBsYXkoKTtcbiAgfSBlbHNlIHtcbiAgICBhdWRpb1NpbXBsZVJ1cy5wbGF5KCk7XG4gIH1cbn07XG5cbmNvbnN0IHBsYXlTcGVjaWFsU291bmQgPSAoKSA9PiB7XG4gIGlmIChzdGF0ZS5lbmdsaXNoTGF5b3V0KSB7XG4gICAgYXVkaW8ucGxheSgpO1xuICB9IGVsc2Uge1xuICAgIGF1ZGlvUnVzLnBsYXkoKTtcbiAgfVxufTtcblxua2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAga2V5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgc3dpdGNoIChldmVudC50YXJnZXQuaW5uZXJUZXh0KSB7XG4gICAgICBjYXNlICdSdSc6XG4gICAgICBjYXNlICdFbic6XG4gICAgICBjYXNlICdXaW4nOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIGF1ZGlvUnVzLnBsYXkoKTtcbiAgICAgICAgY2hhbmdlTGFuZ3VhZ2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdUYWInOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgc2V0U3BhY2UoJyAgICAnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdCYWNrc3BhY2UnOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgYmFja3NwYWNlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRGVsZXRlJzpcbiAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSBwbGF5U3BlY2lhbFNvdW5kKCk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NhcHNMb2NrJzpcbiAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSBwbGF5U3BlY2lhbFNvdW5kKCk7XG4gICAgICAgIGNoYW5nZUNhc2UoKTtcbiAgICAgICAga2V5LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSBwbGF5U3BlY2lhbFNvdW5kKCk7XG4gICAgICAgIHNldFNwYWNlKCdcXG4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTaGlmdCc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNwZWNpYWxTb3VuZCgpO1xuICAgICAgICBjaGFuZ2VDYXNlKCk7XG4gICAgICAgIHNoaWZ0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ3RybCc6XG4gICAgICBjYXNlICdBbHQnOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTcGFjZSc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNvdW5kKCk7XG4gICAgICAgIHNldFNwYWNlKCcgJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnTGVmdCc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNwZWNpYWxTb3VuZCgpO1xuICAgICAgICBsZWZ0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnUmlnaHQnOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgcmlnaHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdVcCc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNwZWNpYWxTb3VuZCgpO1xuICAgICAgICB1cCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0Rvd24nOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgZG93bigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzdGF0ZS5lbmdsaXNoTGF5b3V0KSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSB7XG4gICAgICAgICAgICBhdWRpb1NpbXBsZS5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNwYW4gPSBrZXkucXVlcnlTZWxlY3RvcignLm1haW4ta2V5Jyk7XG4gICAgICAgICAgd3JpdGVMZXR0ZXIoc3Bhbi5pbm5lclRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdGF0ZS5zb3VuZCkge1xuICAgICAgICAgICAgYXVkaW9TaW1wbGVSdXMucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzcGFuID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleS1ydXMnKTtcbiAgICAgICAgICB3cml0ZUxldHRlcihzcGFuLmlubmVyVGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhdGUuc2hpZnQpIHtcbiAgICAgICAgICBjaGFuZ2VDYXNlKCk7XG4gICAgICAgICAgc2hpZnQoKTtcbiAgICAgICAgICBzdGF0ZS5zaGlmdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG59KTtcbiIsImltcG9ydCB7IHRleHRhcmVhLCBrZXlzIH0gZnJvbSAnLi9zY3JpcHQnO1xuXG5jb25zdCBrZXlzS2V5Q29kZSA9IFsxOTIsIDQ5LCA1MCwgNTEsIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDQ4LCAxODksIDE4NywgMjIwLFxuICA4LCA5LCA4MSwgODcsIDY5LCA4MiwgODQsIDg5LCA4NSwgNzMsIDc5LCA4MCwgMjE5LCAyMjEsIDQ2LCAyMCwgNjUsIDgzLCA2OCxcbiAgNzAsIDcxLCA3MiwgNzQsIDc1LCA3NiwgMTg2LCAyMjIsIDEzLCAxNiwgOTAsIDg4LCA2NywgODYsIDY2LCA3OCwgNzcsIDE4OCxcbiAgMTkwLCAxOTEsIDM4LCAxNiwgMTcsIG51bGwsIDE4LCAzMiwgMTgsIDM3LCA0MCwgMzksIDE3XTtcblxudGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXNLZXlDb2RlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleXNLZXlDb2RlW2ldICYmIChpID09PSA0MiB8fCBpID09PSA1NSB8fCBpID09PSA1NylcbiAgICAmJiBldmVudC5sb2NhdGlvbiA9PT0gMSkge1xuICAgICAga2V5c1tpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5c0tleUNvZGVbaV0gJiYgKGkgPT09IDU0IHx8IGkgPT09IDU5IHx8IGkgPT09IDYzKVxuICAgICYmIGV2ZW50LmxvY2F0aW9uID09PSAyKSB7XG4gICAgICBrZXlzW2ldLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSBrZXlzS2V5Q29kZVtpXSAmJiBldmVudC5sb2NhdGlvbiA9PT0gMCkge1xuICAgICAga2V5c1tpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cbn0pO1xuXG50ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXNLZXlDb2RlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleXNLZXlDb2RlW2ldKSB7XG4gICAgICBrZXlzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxufSk7XG4iLCJpbXBvcnQgeyBzdGF0ZSB9IGZyb20gJy4vc2NyaXB0JztcblxuY29uc3Qgc291bmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291bmQgPiBpbWcnKTtcblxuc291bmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGlmIChzb3VuZEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29mZicpKSB7XG4gICAgc291bmRCdXR0b24uc3JjID0gJ2Fzc2V0cy9pY29ucy92b2x1bWUuc3ZnJztcbiAgfSBlbHNlIHtcbiAgICBzb3VuZEJ1dHRvbi5zcmMgPSAnYXNzZXRzL2ljb25zL3ZvbHVtZS1vZmYuc3ZnJztcbiAgfVxuICBzdGF0ZS5zb3VuZCA9ICFzdGF0ZS5zb3VuZDtcbiAgc291bmRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnb2ZmJyk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=