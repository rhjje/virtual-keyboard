(()=>{var t={273:()=>{var e=document.querySelector("body"),t=document.querySelectorAll(".side-key"),n=document.querySelectorAll(".side-key-rus"),a=document.querySelectorAll(".key"),s=document.querySelector(".keyboard"),c=document.querySelector(".textarea"),l=document.querySelector(".main");document.querySelector("div.dark-theme > label > input[type=checkbox]").addEventListener("change",(function(){a.forEach((function(e){e.classList.toggle("dark-theme-keys")})),t.forEach((function(e){e.classList.toggle("dark-theme-side-key")})),n.forEach((function(e){e.classList.toggle("dark-theme-side-key")})),s.classList.toggle("dark-theme-keyboard"),e.classList.toggle("dark-theme-bg"),l.classList.toggle("dark-theme-main"),c.classList.toggle("dark-theme-textarea")}))},84:()=>{window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;var t=new SpeechRecognition;t.interimResults=!0,t.continuous=!0,t.lang="en-gb",document.querySelector("div.key.win").addEventListener("click",(function(){languageEnglish?t.lang="en-gb":t.lang="ru"})),t.addEventListener("result",(function(){var t=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");textarea.value=t}));var n=document.querySelector(".microphone > img");n.addEventListener("click",(function(){n.classList.contains("off")?(n.src="assets/icons/microphone.svg",n.classList.remove("off"),t.start()):(t.stop(),n.src="assets/icons/microphone-off.svg",n.classList.add("off"))}))}},n={};function a(e){if(n[e])return n[e].exports;var s=n[e]={exports:{}};return t[e](s,s.exports,a),s.exports}(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(e,n,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.main=e,this.side=n,this.mainRus=a,this.sideRus=s}var n,a;return n=t,(a=[{key:"render",value:function(){return'\n      <div class="key">\n        <span class="side-key">'.concat(this.side,'</span>\n        <span class="main-key">').concat(this.main,'</span>\n        <span class="side-key-rus disabled">').concat(this.sideRus,'</span>\n        <span class="main-key-rus disabled">').concat(this.mainRus,"</span>\n      </div>")}}])&&e(n.prototype,a),t}();function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t}var t,a;return t=e,(a=[{key:"render",value:function(){return'\n      <div class="key '.concat(this.content.toLowerCase(),'">\n        <span>').concat(this.content,"</span>\n      </div>")}}])&&n(t.prototype,a),e}(),c=document.querySelector(".textarea"),l=document.querySelector(".main"),r=document.createElement("audio"),i=document.createElement("source");i.src="assets/sounds/simple.wav",r.appendChild(i);var o=document.createElement("audio"),d=document.createElement("source");d.src="assets/sounds/key.wav",o.appendChild(d);var u=document.createElement("audio"),y=document.createElement("source");y.src="assets/sounds/key-simple-rus.wav",u.appendChild(y);var f=document.createElement("audio"),v=document.createElement("source");v.src="assets/sounds/key-rus.wav",f.appendChild(v);var m=!0,g=document.querySelector(".sound > img");g.addEventListener("click",(function(){g.classList.contains("off")?(g.src="assets/icons/volume.svg",g.classList.remove("off"),m=!0):(g.src="assets/icons/volume-off.svg",g.classList.add("off"),m=!1)}));var k=[["~","!","@","#","$","%","^","&","*","(",")","_","+","|","Backspace"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","Delete"],["CapsLock","A","S","D","F","G","H","J","K","L",":",'"',"Enter"],["Shift","Z","X","C","V","B","N","M","<",">","?","Up","Shift"],["Ctrl","Win","Alt","Space","Alt","Left","Down","Right","Ctrl"]],p=[["`","1","2","3","4","5","6","7","8","9","0","-","=","\\",null],[null,"q","w","e","r","t","y","u","i","o","p","[","]",null],[null,"a","s","d","f","g","h","j","k","l",";","'",null],[null,"z","x","c","v","b","n","m",",",".","/",null]],h=[["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","/",null],[null,"Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ",null],[null,"Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э",null],[null,"Я","Ч","С","М","И","Т","Ь","Б","Ю",",",null]],L=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","\\",null],[null,"й","ц","у","к","е","н","г","ш","щ","з","х","ъ",null],[null,"ф","ы","в","а","п","р","о","л","д","ж","э",null],[null,"я","ч","с","м","и","т","ь","б","ю",".",null]];!function(){var e=document.createElement("div");e.classList.add("keyboard","keyboard-off");for(var n=0;n<k.length;n+=1){var a=document.createElement("div");switch(n){case 0:a.classList.add("keyboard__row-first");break;case 1:a.classList.add("keyboard__row-second");break;case 2:a.classList.add("keyboard__row-third");break;case 3:a.classList.add("keyboard__row-fourth");break;case 4:a.classList.add("keyboard__row-fifth")}for(var c=0;c<k[n].length;c+=1)if(1===k[n][c].length){var r=new t(p[n][c],k[n][c],L[n][c],h[n][c]);a.innerHTML+=r.render()}else if("Win"===k[n][c])a.innerHTML+='\n          <div class="key win">\n            <span>Win</span>\n            <span class="language-side">Ru</span>\n            <span class="language">En</span>\n          </div>';else{var i=new s(k[n][c]);a.innerHTML+=i.render()}e.appendChild(a)}l.appendChild(e)}();var S=!1,b=!0,E=document.querySelector(".key.capslock"),q=(document.querySelector(".key.shift"),document.querySelectorAll(".key"));q.forEach((function(e){e.addEventListener("click",(function(t){switch(t.target.innerText){case"Ru":case"En":case"Win":m&&f.play(),w(),b=!b;break;case"Tab":b&&m?o.play():m&&f.play(),c.setRangeText("    ",c.selectionStart,c.selectionEnd,"end"),c.focus();break;case"Backspace":b&&m?o.play():m&&f.play(),R();break;case"Delete":b&&m?o.play():m&&f.play(),T();break;case"CapsLock":b&&m?o.play():m&&f.play(),x(),E.classList.toggle("active");break;case"Enter":b&&m?o.play():m&&f.play(),c.setRangeText("\n",c.selectionStart,c.selectionEnd,"end"),c.focus();break;case"Shift":b&&m?o.play():m&&f.play(),x(),q[42].classList.toggle("active"),q[54].classList.toggle("active"),S=!(!q[42].classList.contains("active")||!q[54].classList.contains("active"));break;case"Ctrl":case"Alt":b&&m?o.play():m&&f.play();break;case"Space":b&&m?r.play():m&&u.play(),c.setRangeText(" ",c.selectionStart,c.selectionEnd,"end"),c.focus();break;case"Left":b&&m?o.play():m&&f.play(),C();break;case"Right":b&&m?o.play():m&&f.play(),A();break;case"Up":b&&m?o.play():m&&f.play(),H();break;case"Down":b&&m?o.play():m&&f.play(),M();break;default:if(b){m&&r.play();var n=e.querySelector(".main-key");c.setRangeText(n.innerText,c.selectionStart,c.selectionEnd,"end"),c.focus()}else{m&&u.play();var a=e.querySelector(".main-key-rus");c.setRangeText(a.innerText,c.selectionStart,c.selectionEnd,"end"),c.focus()}S&&(x(),S=!1,q[42].classList.toggle("active"),q[54].classList.toggle("active"))}}))}));var w=function(){var e=document.querySelectorAll(".side-key"),t=document.querySelectorAll(".main-key"),n=document.querySelectorAll(".side-key-rus"),a=document.querySelectorAll(".main-key-rus"),s=document.querySelector(".language"),c=document.querySelector(".language-side"),l=s.innerText;s.innerText=c.innerText,c.innerText=l;for(var r=0;r<e.length;r+=1)e[r].classList.toggle("disabled"),t[r].classList.toggle("disabled"),n[r].classList.toggle("disabled"),a[r].classList.toggle("disabled")},R=function(){var e=c.value.slice(0,c.selectionStart),t=c.value.slice(c.selectionEnd),n=c.selectionStart;c.value=e.slice(0,-1)+t,c.focus(),n>0?c.setSelectionRange(n-1,n-1):c.setSelectionRange(n,n)},T=function(){var e=c.value.slice(0,c.selectionStart),t=c.value.slice(c.selectionEnd),n=c.selectionStart;c.value=e+t.slice(1),c.focus(),c.value.length,c.setSelectionRange(n,n)},x=function(){document.querySelectorAll(".key").forEach((function(e){if(e.querySelector(".side-key")){var t=e.querySelector(".side-key"),n=e.querySelector(".main-key"),a=e.querySelector(".side-key-rus"),s=e.querySelector(".main-key-rus"),c=n.innerHTML,l=s.innerHTML;n.innerHTML=t.innerHTML,t.innerHTML=c,s.innerHTML=a.innerHTML,a.innerHTML=l}}))},C=function(){var e=c.selectionStart;c.focus(),e>0?c.setSelectionRange(e-1,e-1):c.setSelectionRange(e,e)},A=function(){var e=c.selectionStart;c.focus(),e<c.value.length?c.setSelectionRange(e+1,e+1):c.setSelectionRange(e,e)},H=function(){var e=c.selectionStart;if(c.focus(),e>0){var t=c.value.slice(0,c.selectionStart).length;c.setSelectionRange(e-t,e-t)}else c.setSelectionRange(e,e)},M=function(){var e=c.selectionStart;if(c.focus(),e<c.value.length){var t=c.value.slice(c.selectionEnd).length;c.setSelectionRange(e+t,e+t)}else c.setSelectionRange(e,e)},_=[192,49,50,51,52,53,54,55,56,57,48,189,187,220,8,9,81,87,69,82,84,89,85,73,79,80,219,221,46,20,65,83,68,70,71,72,74,75,76,186,222,13,16,90,88,67,86,66,78,77,188,190,191,38,16,17,null,18,32,18,37,40,39,17];c.addEventListener("keydown",(function(e){for(var t=0;t<_.length;t+=1){if(e.keyCode===_[t]&&(42===t||55===t||57===t)&&1===e.location){q[t].classList.add("active");break}if(e.keyCode===_[t]&&(54===t||59===t||63===t)&&2===e.location){q[t].classList.add("active");break}e.keyCode===_[t]&&0===e.location&&q[t].classList.add("active")}})),c.addEventListener("keyup",(function(e){for(var t=0;t<_.length;t+=1)e.keyCode===_[t]&&q[t].classList.remove("active")}));var D=document.querySelector(".keyboard");document.querySelector("input[type=checkbox]").addEventListener("change",(function(e){e.target.checked?D.classList.remove("keyboard-off"):D.classList.add("keyboard-off")}));var W=document.querySelector("div.info > img"),j=document.querySelector(".info-modal"),B=document.querySelector(".modal-background"),O=document.querySelector(".close>img");W.addEventListener("click",(function(){j.classList.remove("disabled-modal"),B.classList.remove("disabled-modal")})),O.addEventListener("click",(function(){j.classList.add("disabled-modal"),B.classList.add("disabled-modal")})),B.addEventListener("click",(function(){j.classList.add("disabled-modal"),B.classList.add("disabled-modal")})),a(273),a(84)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvZGFyay10aGVtZS5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvc3BlZWNoLmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvY29tcG9uZW50cy9tYWluS2V5LmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC8uL3NyYy9qcy9jb21wb25lbnRzL3NpZGVLZXkuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJib2R5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2lkZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzaWRlUnVzIiwia2V5cyIsImtleWJvYXJkIiwidGV4dGFyZWEiLCJtYWluIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvckVhY2giLCJrZXkiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ3aW5kb3ciLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwicmVjIiwiaW50ZXJpbVJlc3VsdHMiLCJjb250aW51b3VzIiwibGFuZyIsImxhbmd1YWdlRW5nbGlzaCIsInRleHQiLCJBcnJheSIsImZyb20iLCJlIiwicmVzdWx0cyIsIm1hcCIsInJlc3VsdCIsInRyYW5zY3JpcHQiLCJqb2luIiwidmFsdWUiLCJtaWNyb3Bob25lQnV0dG9uIiwiY29udGFpbnMiLCJzcmMiLCJyZW1vdmUiLCJzdGFydCIsInN0b3AiLCJhZGQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIk1haW5LZXkiLCJtYWluUnVzIiwidGhpcyIsIlNpZGVLZXkiLCJjb250ZW50IiwidG9Mb3dlckNhc2UiLCJhdWRpb1NpbXBsZSIsImNyZWF0ZUVsZW1lbnQiLCJzb3VyY2VTaW1wbGUiLCJhcHBlbmRDaGlsZCIsImF1ZGlvIiwic291cmNlIiwiYXVkaW9TaW1wbGVSdXMiLCJzb3VyY2VTaW1wbGVSdXMiLCJhdWRpb1J1cyIsInNvdXJjZVJ1cyIsInNvdW5kVHVybiIsInNvdW5kQnV0dG9uIiwic2lkZUtleXMiLCJtYWluS2V5cyIsInNpZGVLZXlzUnVzIiwibWFpbktleXNSdXMiLCJpIiwibGVuZ3RoIiwicm93IiwiaiIsImlubmVySFRNTCIsInJlbmRlciIsImNyZWF0ZUtleWJvYXJkIiwic2hpZnRBY3RpdmUiLCJjYXBzbG9jayIsImV2ZW50IiwidGFyZ2V0IiwiaW5uZXJUZXh0IiwicGxheSIsImNoYW5nZUxhbmd1YWdlIiwic2V0UmFuZ2VUZXh0Iiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJmb2N1cyIsImJhY2tzcGFjZSIsImRlbGV0ZUJ1dHRvbiIsInNoaWZ0IiwibGVmdCIsInJpZ2h0IiwidXAiLCJkb3duIiwic3BhbiIsImxhbmd1YWdlIiwibGFuZ3VhZ2VTaWRlIiwidGVtcCIsImZpcnN0U3RyaW5nIiwic2xpY2UiLCJzZWNvbmRTdHJpbmciLCJwb3NpdGlvbkZvY3VzIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJzaWRlS2V5IiwibWFpbktleSIsInNpZGVLZXlSdXMiLCJtYWluS2V5UnVzIiwidGVtcFJ1cyIsImNvdW50Iiwia2V5c0tleUNvZGUiLCJrZXlDb2RlIiwibG9jYXRpb24iLCJjaGVja2VkIiwibW9kYWxXaW5kb3dCdXR0b24iLCJtb2RhbFdpbmRvdyIsIm1vZGFsV2luZG93QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCdXR0b24iXSwibWFwcGluZ3MiOiJzQkFBQSxJQUFNQSxFQUFPQyxTQUFTQyxjQUFjLFFBQzlCQyxFQUFPRixTQUFTRyxpQkFBaUIsYUFDakNDLEVBQVVKLFNBQVNHLGlCQUFpQixpQkFDcENFLEVBQU9M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VUFBVTBCLElBQUksbUJBTTNCLElBQU15RSxFQUFvQi9HLFNBQVNDLGNBQWMsa0JBQzNDK0csRUFBY2hILFNBQVNDLGNBQWMsZUFDckNnSCxFQUF3QmpILFNBQVNDLGNBQWMscUJBQy9DaUgsRUFBbUJsSCxTQUFTQyxjQUFjLGNBRWhEOEcsRUFBa0J0RyxpQkFBaUIsU0FBUyxXQUMxQ3VHLEVBQVlwRyxVQUFVdUIsT0FBTyxrQkFDN0I4RSxFQUFzQnJHLFVBQVV1QixPQUFPLHFCQUd6QytFLEVBQWlCekcsaUJBQWlCLFNBQVMsV0FDekN1RyxFQUFZcEcsVUFBVTBCLElBQUksa0JBQzFCMkUsRUFBc0JyRyxVQUFVMEIsSUFBSSxxQkFHdEMyRSxFQUFzQnhHLGlCQUFpQixTQUFTLFdBQzlDdUcsRUFBWXBHLFVBQVUwQixJQUFJLGtCQUMxQjJFLEVBQXNCckcsVUFBVTBCLElBQUkscUIiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbmNvbnN0IHNpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1rZXknKTtcbmNvbnN0IHNpZGVSdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1rZXktcnVzJyk7XG5jb25zdCBrZXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuY29uc3Qga2V5Ym9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcua2V5Ym9hcmQnKTtcbmNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHRhcmVhJyk7XG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmRhcmstdGhlbWUgPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3hdJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGtleS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLWtleXMnKTtcbiAgfSk7XG5cbiAgc2lkZS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBrZXkuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1zaWRlLWtleScpO1xuICB9KTtcblxuICBzaWRlUnVzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGtleS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLXNpZGUta2V5Jyk7XG4gIH0pO1xuXG4gIGtleWJvYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2RhcmstdGhlbWUta2V5Ym9hcmQnKTtcbiAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLWJnJyk7XG4gIG1haW4uY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1tYWluJyk7XG4gIHRleHRhcmVhLmNsYXNzTGlzdC50b2dnbGUoJ2RhcmstdGhlbWUtdGV4dGFyZWEnKTtcbn0pO1xuIiwid2luZG93LlNwZWVjaFJlY29nbml0aW9uID0gd2luZG93LlNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbjtcblxuY29uc3QgcmVjID0gbmV3IFNwZWVjaFJlY29nbml0aW9uKCk7XG5yZWMuaW50ZXJpbVJlc3VsdHMgPSB0cnVlO1xucmVjLmNvbnRpbnVvdXMgPSB0cnVlO1xucmVjLmxhbmcgPSAnZW4tZ2InO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYua2V5LndpbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpZiAobGFuZ3VhZ2VFbmdsaXNoKSB7XG4gICAgcmVjLmxhbmcgPSAnZW4tZ2InO1xuICB9IGVsc2Uge1xuICAgIHJlYy5sYW5nID0gJ3J1JztcbiAgfVxufSk7XG5cbnJlYy5hZGRFdmVudExpc3RlbmVyKCdyZXN1bHQnLCAoKSA9PiB7XG4gIGNvbnN0IHRleHQgPSBBcnJheS5mcm9tKGUucmVzdWx0cylcbiAgICAubWFwKHJlc3VsdCA9PiByZXN1bHRbMF0pXG4gICAgLm1hcChyZXN1bHQgPT4gcmVzdWx0LnRyYW5zY3JpcHQpXG4gICAgLmpvaW4oJycpO1xuICB0ZXh0YXJlYS52YWx1ZSA9IHRleHQ7XG59KTtcblxuY29uc3QgbWljcm9waG9uZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5taWNyb3Bob25lID4gaW1nJyk7XG5taWNyb3Bob25lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpZiAobWljcm9waG9uZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29mZicpKSB7XG4gICAgbWljcm9waG9uZUJ1dHRvbi5zcmMgPSAnYXNzZXRzL2ljb25zL21pY3JvcGhvbmUuc3ZnJztcbiAgICBtaWNyb3Bob25lQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29mZicpO1xuICAgIHJlYy5zdGFydCgpO1xuICB9IGVsc2Uge1xuICAgIHJlYy5zdG9wKCk7XG4gICAgbWljcm9waG9uZUJ1dHRvbi5zcmMgPSAnYXNzZXRzL2ljb25zL21pY3JvcGhvbmUtb2ZmLnN2Zyc7XG4gICAgbWljcm9waG9uZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdvZmYnKTtcbiAgfVxufSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5LZXkge1xuICBjb25zdHJ1Y3RvcihtYWluLCBzaWRlLCBtYWluUnVzLCBzaWRlUnVzKSB7XG4gICAgdGhpcy5tYWluID0gbWFpbjtcbiAgICB0aGlzLnNpZGUgPSBzaWRlO1xuICAgIHRoaXMubWFpblJ1cyA9IG1haW5SdXM7XG4gICAgdGhpcy5zaWRlUnVzID0gc2lkZVJ1cztcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImtleVwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNpZGUta2V5XCI+JHt0aGlzLnNpZGV9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cIm1haW4ta2V5XCI+JHt0aGlzLm1haW59PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNpZGUta2V5LXJ1cyBkaXNhYmxlZFwiPiR7dGhpcy5zaWRlUnVzfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJtYWluLWtleS1ydXMgZGlzYWJsZWRcIj4ke3RoaXMubWFpblJ1c308L3NwYW4+XG4gICAgICA8L2Rpdj5gO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTaWRlS2V5IHtcbiAgY29uc3RydWN0b3IoY29udGVudCkge1xuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJrZXkgJHt0aGlzLmNvbnRlbnQudG9Mb3dlckNhc2UoKX1cIj5cbiAgICAgICAgPHNwYW4+JHt0aGlzLmNvbnRlbnR9PC9zcGFuPlxuICAgICAgPC9kaXY+YDtcbiAgfVxufVxuIiwiaW1wb3J0IE1haW5LZXkgZnJvbSAnLi9jb21wb25lbnRzL21haW5LZXknO1xuaW1wb3J0IFNpZGVLZXkgZnJvbSAnLi9jb21wb25lbnRzL3NpZGVLZXknO1xuXG5jb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0YXJlYScpO1xuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG5cbi8vIHNvdW5kIGtleWJvYXJkXG5cbmNvbnN0IGF1ZGlvU2ltcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbmNvbnN0IHNvdXJjZVNpbXBsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuc291cmNlU2ltcGxlLnNyYyA9ICdhc3NldHMvc291bmRzL3NpbXBsZS53YXYnO1xuYXVkaW9TaW1wbGUuYXBwZW5kQ2hpbGQoc291cmNlU2ltcGxlKTtcblxuY29uc3QgYXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuY29uc3Qgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG5zb3VyY2Uuc3JjID0gJ2Fzc2V0cy9zb3VuZHMva2V5Lndhdic7XG5hdWRpby5hcHBlbmRDaGlsZChzb3VyY2UpO1xuXG5jb25zdCBhdWRpb1NpbXBsZVJ1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5jb25zdCBzb3VyY2VTaW1wbGVSdXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcbnNvdXJjZVNpbXBsZVJ1cy5zcmMgPSAnYXNzZXRzL3NvdW5kcy9rZXktc2ltcGxlLXJ1cy53YXYnO1xuYXVkaW9TaW1wbGVSdXMuYXBwZW5kQ2hpbGQoc291cmNlU2ltcGxlUnVzKTtcblxuY29uc3QgYXVkaW9SdXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuY29uc3Qgc291cmNlUnVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG5zb3VyY2VSdXMuc3JjID0gJ2Fzc2V0cy9zb3VuZHMva2V5LXJ1cy53YXYnO1xuYXVkaW9SdXMuYXBwZW5kQ2hpbGQoc291cmNlUnVzKTtcblxubGV0IHNvdW5kVHVybiA9IHRydWU7XG5cbmNvbnN0IHNvdW5kQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdW5kID4gaW1nJyk7XG5zb3VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgaWYgKHNvdW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnb2ZmJykpIHtcbiAgICBzb3VuZEJ1dHRvbi5zcmMgPSAnYXNzZXRzL2ljb25zL3ZvbHVtZS5zdmcnO1xuICAgIHNvdW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29mZicpO1xuICAgIHNvdW5kVHVybiA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgc291bmRCdXR0b24uc3JjID0gJ2Fzc2V0cy9pY29ucy92b2x1bWUtb2ZmLnN2Zyc7XG4gICAgc291bmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnb2ZmJyk7XG4gICAgc291bmRUdXJuID0gZmFsc2U7XG4gIH1cbn0pO1xuXG5jb25zdCBzaWRlS2V5cyA9IFtcbiAgWyd+JywgJyEnLCAnQCcsICcjJywgJyQnLCAnJScsICdeJywgJyYnLCAnKicsICcoJywgJyknLCAnXycsICcrJywgJ3wnLCAnQmFja3NwYWNlJ10sXG4gIFsnVGFiJywgJ1EnLCAnVycsICdFJywgJ1InLCAnVCcsICdZJywgJ1UnLCAnSScsICdPJywgJ1AnLCAneycsICd9JywgJ0RlbGV0ZSddLFxuICBbJ0NhcHNMb2NrJywgJ0EnLCAnUycsICdEJywgJ0YnLCAnRycsICdIJywgJ0onLCAnSycsICdMJywgJzonLCAnXCInLCAnRW50ZXInXSxcbiAgWydTaGlmdCcsICdaJywgJ1gnLCAnQycsICdWJywgJ0InLCAnTicsICdNJywgJzwnLCAnPicsICc/JywgJ1VwJywgJ1NoaWZ0J10sXG4gIFsnQ3RybCcsICdXaW4nLCAnQWx0JywgJ1NwYWNlJywgJ0FsdCcsICdMZWZ0JywgJ0Rvd24nLCAnUmlnaHQnLCAnQ3RybCddLFxuXTtcblxuY29uc3QgbWFpbktleXMgPSBbXG4gIFsnYCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywgJy0nLCAnPScsICdcXFxcJywgbnVsbF0sXG4gIFtudWxsLCAncScsICd3JywgJ2UnLCAncicsICd0JywgJ3knLCAndScsICdpJywgJ28nLCAncCcsICdbJywgJ10nLCBudWxsXSxcbiAgW251bGwsICdhJywgJ3MnLCAnZCcsICdmJywgJ2cnLCAnaCcsICdqJywgJ2snLCAnbCcsICc7JywgJ1xcJycsIG51bGxdLFxuICBbbnVsbCwgJ3onLCAneCcsICdjJywgJ3YnLCAnYicsICduJywgJ20nLCAnLCcsICcuJywgJy8nLCBudWxsXSxcbl07XG5cbmNvbnN0IHNpZGVLZXlzUnVzID0gW1xuICBbJ9CBJywgJyEnLCAnXCInLCAn4oSWJywgJzsnLCAnJScsICc6JywgJz8nLCAnKicsICcoJywgJyknLCAnXycsICcrJywgJy8nLCBudWxsXSxcbiAgW251bGwsICfQmScsICfQpicsICfQoycsICfQmicsICfQlScsICfQnScsICfQkycsICfQqCcsICfQqScsICfQlycsICfQpScsICfQqicsIG51bGxdLFxuICBbbnVsbCwgJ9CkJywgJ9CrJywgJ9CSJywgJ9CQJywgJ9CfJywgJ9CgJywgJ9CeJywgJ9CbJywgJ9CUJywgJ9CWJywgJ9CtJywgbnVsbF0sXG4gIFtudWxsLCAn0K8nLCAn0KcnLCAn0KEnLCAn0JwnLCAn0JgnLCAn0KInLCAn0KwnLCAn0JEnLCAn0K4nLCAnLCcsIG51bGxdLFxuXTtcblxuY29uc3QgbWFpbktleXNSdXMgPSBbXG4gIFsn0ZEnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLCAnXFxcXCcsIG51bGxdLFxuICBbbnVsbCwgJ9C5JywgJ9GGJywgJ9GDJywgJ9C6JywgJ9C1JywgJ9C9JywgJ9CzJywgJ9GIJywgJ9GJJywgJ9C3JywgJ9GFJywgJ9GKJywgbnVsbF0sXG4gIFtudWxsLCAn0YQnLCAn0YsnLCAn0LInLCAn0LAnLCAn0L8nLCAn0YAnLCAn0L4nLCAn0LsnLCAn0LQnLCAn0LYnLCAn0Y0nLCBudWxsXSxcbiAgW251bGwsICfRjycsICfRhycsICfRgScsICfQvCcsICfQuCcsICfRgicsICfRjCcsICfQsScsICfRjicsICcuJywgbnVsbF0sXG5dO1xuXG5jb25zdCBjcmVhdGVLZXlib2FyZCA9ICgpID0+IHtcbiAgY29uc3Qga2V5Ym9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAga2V5Ym9hcmQuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmQnLCAna2V5Ym9hcmQtb2ZmJyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2lkZUtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzd2l0Y2ggKGkpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkX19yb3ctZmlyc3QnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZF9fcm93LXNlY29uZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkX19yb3ctdGhpcmQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZF9fcm93LWZvdXJ0aCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkX19yb3ctZmlmdGgnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpZGVLZXlzW2ldLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICBpZiAoc2lkZUtleXNbaV1bal0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5ldyBNYWluS2V5KG1haW5LZXlzW2ldW2pdLCBzaWRlS2V5c1tpXVtqXSxcbiAgICAgICAgICBtYWluS2V5c1J1c1tpXVtqXSwgc2lkZUtleXNSdXNbaV1bal0pO1xuICAgICAgICByb3cuaW5uZXJIVE1MICs9IGtleS5yZW5kZXIoKTtcbiAgICAgIH0gZWxzZSBpZiAoc2lkZUtleXNbaV1bal0gPT09ICdXaW4nKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwia2V5IHdpblwiPlxuICAgICAgICAgICAgPHNwYW4+V2luPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYW5ndWFnZS1zaWRlXCI+UnU8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhbmd1YWdlXCI+RW48L3NwYW4+XG4gICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgcm93LmlubmVySFRNTCArPSBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBrZXkgPSBuZXcgU2lkZUtleShzaWRlS2V5c1tpXVtqXSk7XG4gICAgICAgIHJvdy5pbm5lckhUTUwgKz0ga2V5LnJlbmRlcigpO1xuICAgICAgfVxuICAgIH1cbiAgICBrZXlib2FyZC5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG5cbiAgbWFpbi5hcHBlbmRDaGlsZChrZXlib2FyZCk7XG59O1xuXG5jcmVhdGVLZXlib2FyZCgpO1xuXG5sZXQgc2hpZnRBY3RpdmUgPSBmYWxzZTtcbmxldCBsYW5ndWFnZUVuZ2xpc2ggPSB0cnVlO1xuY29uc3QgY2Fwc2xvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcua2V5LmNhcHNsb2NrJyk7XG5jb25zdCBrZXlTaGlmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rZXkuc2hpZnQnKTtcblxuY29uc3Qga2V5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5rZXknKTtcblxua2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAga2V5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgc3dpdGNoIChldmVudC50YXJnZXQuaW5uZXJUZXh0KSB7XG4gICAgICBjYXNlICdSdSc6XG4gICAgICBjYXNlICdFbic6XG4gICAgICBjYXNlICdXaW4nOlxuICAgICAgICBpZiAoc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW9SdXMucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZUxhbmd1YWdlKCk7XG4gICAgICAgIGlmIChsYW5ndWFnZUVuZ2xpc2gpIHtcbiAgICAgICAgICBsYW5ndWFnZUVuZ2xpc2ggPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYW5ndWFnZUVuZ2xpc2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnVGFiJzpcbiAgICAgICAgaWYgKGxhbmd1YWdlRW5nbGlzaCAmJiBzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpby5wbGF5KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW9SdXMucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHRleHRhcmVhLnNldFJhbmdlVGV4dCgnICAgICcsIHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0LCB0ZXh0YXJlYS5zZWxlY3Rpb25FbmQsIFwiZW5kXCIpO1xuICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0JhY2tzcGFjZSc6XG4gICAgICAgIGlmIChsYW5ndWFnZUVuZ2xpc2ggJiYgc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW8ucGxheSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvUnVzLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBiYWNrc3BhY2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdEZWxldGUnOlxuICAgICAgICBpZiAobGFuZ3VhZ2VFbmdsaXNoICYmIHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpb1J1cy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlQnV0dG9uKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2Fwc0xvY2snOlxuICAgICAgICBpZiAobGFuZ3VhZ2VFbmdsaXNoICYmIHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpb1J1cy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgc2hpZnQoKTtcbiAgICAgICAgY2Fwc2xvY2suY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICBpZiAobGFuZ3VhZ2VFbmdsaXNoICYmIHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpb1J1cy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dGFyZWEuc2V0UmFuZ2VUZXh0KCdcXG4nLCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCwgdGV4dGFyZWEuc2VsZWN0aW9uRW5kLCBcImVuZFwiKTtcbiAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTaGlmdCc6XG4gICAgICAgIGlmIChsYW5ndWFnZUVuZ2xpc2ggJiYgc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW8ucGxheSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvUnVzLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBzaGlmdCgpO1xuICAgICAgICBrZXlzWzQyXS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAga2V5c1s1NF0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIGlmIChrZXlzWzQyXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIGtleXNbNTRdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICBzaGlmdEFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hpZnRBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0N0cmwnOlxuICAgICAgICBpZiAobGFuZ3VhZ2VFbmdsaXNoICYmIHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpb1J1cy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdBbHQnOlxuICAgICAgICBpZiAobGFuZ3VhZ2VFbmdsaXNoICYmIHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpb1J1cy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTcGFjZSc6XG4gICAgICAgIGlmIChsYW5ndWFnZUVuZ2xpc2ggJiYgc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW9TaW1wbGUucGxheSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvU2ltcGxlUnVzLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0YXJlYS5zZXRSYW5nZVRleHQoJyAnLCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCwgdGV4dGFyZWEuc2VsZWN0aW9uRW5kLCBcImVuZFwiKTtcbiAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdMZWZ0JzpcbiAgICAgICAgaWYgKGxhbmd1YWdlRW5nbGlzaCAmJiBzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpby5wbGF5KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW9SdXMucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIGxlZnQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdSaWdodCc6XG4gICAgICAgIGlmIChsYW5ndWFnZUVuZ2xpc2ggJiYgc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW8ucGxheSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvUnVzLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICByaWdodCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1VwJzpcbiAgICAgICAgaWYgKGxhbmd1YWdlRW5nbGlzaCAmJiBzb3VuZFR1cm4pIHtcbiAgICAgICAgICBhdWRpby5wbGF5KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW9SdXMucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHVwKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRG93bic6XG4gICAgICAgIGlmIChsYW5ndWFnZUVuZ2xpc2ggJiYgc291bmRUdXJuKSB7XG4gICAgICAgICAgYXVkaW8ucGxheSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdW5kVHVybikge1xuICAgICAgICAgIGF1ZGlvUnVzLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBkb3duKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxhbmd1YWdlRW5nbGlzaCkge1xuICAgICAgICAgIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICAgIGF1ZGlvU2ltcGxlLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc3BhbiA9IGtleS5xdWVyeVNlbGVjdG9yKCcubWFpbi1rZXknKTtcbiAgICAgICAgICB0ZXh0YXJlYS5zZXRSYW5nZVRleHQoc3Bhbi5pbm5lclRleHQsIHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0LCB0ZXh0YXJlYS5zZWxlY3Rpb25FbmQsICdlbmQnKTtcbiAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzb3VuZFR1cm4pIHtcbiAgICAgICAgICAgIGF1ZGlvU2ltcGxlUnVzLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc3BhbiA9IGtleS5xdWVyeVNlbGVjdG9yKCcubWFpbi1rZXktcnVzJyk7XG4gICAgICAgICAgdGV4dGFyZWEuc2V0UmFuZ2VUZXh0KHNwYW4uaW5uZXJUZXh0LCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCwgdGV4dGFyZWEuc2VsZWN0aW9uRW5kLCAnZW5kJyk7XG4gICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaGlmdEFjdGl2ZSkge1xuICAgICAgICAgIHNoaWZ0KCk7XG4gICAgICAgICAgc2hpZnRBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICBrZXlzWzQyXS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgICBrZXlzWzU0XS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0pO1xufSk7XG5cbmNvbnN0IGNoYW5nZUxhbmd1YWdlID0gKCkgPT4ge1xuICBjb25zdCBzaWRlS2V5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWtleScpO1xuICBjb25zdCBtYWluS2V5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLWtleScpO1xuICBjb25zdCBzaWRlS2V5c1J1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWtleS1ydXMnKTtcbiAgY29uc3QgbWFpbktleXNSdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1rZXktcnVzJyk7XG5cbiAgY29uc3QgbGFuZ3VhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFuZ3VhZ2UnKTtcbiAgY29uc3QgbGFuZ3VhZ2VTaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxhbmd1YWdlLXNpZGUnKTtcbiAgY29uc3QgdGVtcCA9IGxhbmd1YWdlLmlubmVyVGV4dDtcbiAgbGFuZ3VhZ2UuaW5uZXJUZXh0ID0gbGFuZ3VhZ2VTaWRlLmlubmVyVGV4dDtcbiAgbGFuZ3VhZ2VTaWRlLmlubmVyVGV4dCA9IHRlbXA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWRlS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHNpZGVLZXlzW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJyk7XG4gICAgbWFpbktleXNbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKTtcbiAgICBzaWRlS2V5c1J1c1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpO1xuICAgIG1haW5LZXlzUnVzW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJyk7XG4gIH1cbn07XG5cbmNvbnN0IGJhY2tzcGFjZSA9ICgpID0+IHtcbiAgY29uc3QgZmlyc3RTdHJpbmcgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSgwLCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCk7XG4gIGNvbnN0IHNlY29uZFN0cmluZyA9IHRleHRhcmVhLnZhbHVlLnNsaWNlKHRleHRhcmVhLnNlbGVjdGlvbkVuZCk7XG4gIGNvbnN0IHBvc2l0aW9uRm9jdXMgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydDtcblxuICB0ZXh0YXJlYS52YWx1ZSA9IGZpcnN0U3RyaW5nLnNsaWNlKDAsIC0xKSArIHNlY29uZFN0cmluZztcbiAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgaWYgKHBvc2l0aW9uRm9jdXMgPiAwKSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cyAtIDEsIHBvc2l0aW9uRm9jdXMgLSAxKTtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzLCBwb3NpdGlvbkZvY3VzKTtcbiAgfVxufTtcblxuY29uc3QgZGVsZXRlQnV0dG9uID0gKCkgPT4ge1xuICBjb25zdCBmaXJzdFN0cmluZyA9IHRleHRhcmVhLnZhbHVlLnNsaWNlKDAsIHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0KTtcbiAgY29uc3Qgc2Vjb25kU3RyaW5nID0gdGV4dGFyZWEudmFsdWUuc2xpY2UodGV4dGFyZWEuc2VsZWN0aW9uRW5kKTtcbiAgY29uc3QgcG9zaXRpb25Gb2N1cyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuXG4gIHRleHRhcmVhLnZhbHVlID0gZmlyc3RTdHJpbmcgKyBzZWNvbmRTdHJpbmcuc2xpY2UoMSk7XG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzIDwgdGV4dGFyZWEudmFsdWUubGVuZ3RoKSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IHNoaWZ0ID0gKCkgPT4ge1xuICBjb25zdCBrZXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChrZXkucXVlcnlTZWxlY3RvcignLnNpZGUta2V5JykpIHtcbiAgICAgIGNvbnN0IHNpZGVLZXkgPSBrZXkucXVlcnlTZWxlY3RvcignLnNpZGUta2V5Jyk7XG4gICAgICBjb25zdCBtYWluS2V5ID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleScpO1xuICAgICAgY29uc3Qgc2lkZUtleVJ1cyA9IGtleS5xdWVyeVNlbGVjdG9yKCcuc2lkZS1rZXktcnVzJyk7XG4gICAgICBjb25zdCBtYWluS2V5UnVzID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleS1ydXMnKTtcblxuICAgICAgY29uc3QgdGVtcCA9IG1haW5LZXkuaW5uZXJIVE1MO1xuICAgICAgY29uc3QgdGVtcFJ1cyA9IG1haW5LZXlSdXMuaW5uZXJIVE1MO1xuXG4gICAgICBtYWluS2V5LmlubmVySFRNTCA9IHNpZGVLZXkuaW5uZXJIVE1MO1xuICAgICAgc2lkZUtleS5pbm5lckhUTUwgPSB0ZW1wO1xuXG4gICAgICBtYWluS2V5UnVzLmlubmVySFRNTCA9IHNpZGVLZXlSdXMuaW5uZXJIVE1MO1xuICAgICAgc2lkZUtleVJ1cy5pbm5lckhUTUwgPSB0ZW1wUnVzO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCBsZWZ0ID0gKCkgPT4ge1xuICBjb25zdCBwb3NpdGlvbkZvY3VzID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgaWYgKHBvc2l0aW9uRm9jdXMgPiAwKSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cyAtIDEsIHBvc2l0aW9uRm9jdXMgLSAxKTtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzLCBwb3NpdGlvbkZvY3VzKTtcbiAgfVxufTtcblxuY29uc3QgcmlnaHQgPSAoKSA9PiB7XG4gIGNvbnN0IHBvc2l0aW9uRm9jdXMgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydDtcblxuICB0ZXh0YXJlYS5mb2N1cygpO1xuICBpZiAocG9zaXRpb25Gb2N1cyA8IHRleHRhcmVhLnZhbHVlLmxlbmd0aCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMgKyAxLCBwb3NpdGlvbkZvY3VzICsgMSk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IHVwID0gKCkgPT4ge1xuICBjb25zdCBwb3NpdGlvbkZvY3VzID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgaWYgKHBvc2l0aW9uRm9jdXMgPiAwKSB7XG4gICAgY29uc3QgY291bnQgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSgwLCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCkubGVuZ3RoO1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMgLSBjb3VudCwgcG9zaXRpb25Gb2N1cyAtIGNvdW50KTtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzLCBwb3NpdGlvbkZvY3VzKTtcbiAgfVxufTtcblxuY29uc3QgZG93biA9ICgpID0+IHtcbiAgY29uc3QgcG9zaXRpb25Gb2N1cyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuXG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzIDwgdGV4dGFyZWEudmFsdWUubGVuZ3RoKSB7XG4gICAgY29uc3QgY291bnQgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSh0ZXh0YXJlYS5zZWxlY3Rpb25FbmQpLmxlbmd0aDtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzICsgY291bnQsIHBvc2l0aW9uRm9jdXMgKyBjb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbi8vIGFkZCByZWFsIGtleWJvYXJkXG5cbmNvbnN0IGtleXNLZXlDb2RlID0gWzE5MiwgNDksIDUwLCA1MSwgNTIsIDUzLCA1NCwgNTUsIDU2LCA1NywgNDgsIDE4OSwgMTg3LCAyMjAsXG4gIDgsIDksIDgxLCA4NywgNjksIDgyLCA4NCwgODksIDg1LCA3MywgNzksIDgwLCAyMTksIDIyMSwgNDYsIDIwLCA2NSwgODMsIDY4LFxuICA3MCwgNzEsIDcyLCA3NCwgNzUsIDc2LCAxODYsIDIyMiwgMTMsIDE2LCA5MCwgODgsIDY3LCA4NiwgNjYsIDc4LCA3NywgMTg4LFxuICAxOTAsIDE5MSwgMzgsIDE2LCAxNywgbnVsbCwgMTgsIDMyLCAxOCwgMzcsIDQwLCAzOSwgMTddO1xuXG50ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0tleUNvZGUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5c0tleUNvZGVbaV0gJiYgKGkgPT09IDQyIHx8IGkgPT09IDU1IHx8IGkgPT09IDU3KVxuICAgICYmIGV2ZW50LmxvY2F0aW9uID09PSAxKSB7XG4gICAgICBrZXlzW2ldLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSBrZXlzS2V5Q29kZVtpXSAmJiAoaSA9PT0gNTQgfHwgaSA9PT0gNTkgfHwgaSA9PT0gNjMpXG4gICAgJiYgZXZlbnQubG9jYXRpb24gPT09IDIpIHtcbiAgICAgIGtleXNbaV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleXNLZXlDb2RlW2ldICYmIGV2ZW50LmxvY2F0aW9uID09PSAwKSB7XG4gICAgICBrZXlzW2ldLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxufSk7XG5cbnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0tleUNvZGUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5c0tleUNvZGVbaV0pIHtcbiAgICAgIGtleXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuICB9XG59KTtcblxuLy8gdHVybiBvbiBrZXlib2FyZFxuXG5jb25zdCBrZXlib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rZXlib2FyZCcpO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICBrZXlib2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdrZXlib2FyZC1vZmYnKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlib2FyZC5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZC1vZmYnKTtcbiAgfVxufSk7XG5cbi8vIGFkZCBtb2RhbCB3aW5kb3dcblxuY29uc3QgbW9kYWxXaW5kb3dCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuaW5mbyA+IGltZycpO1xuY29uc3QgbW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby1tb2RhbCcpO1xuY29uc3QgbW9kYWxXaW5kb3dCYWNrZ3JvdW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJhY2tncm91bmQnKTtcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2U+aW1nJyk7XG5cbm1vZGFsV2luZG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZC1tb2RhbCcpO1xuICBtb2RhbFdpbmRvd0JhY2tncm91bmQuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQtbW9kYWwnKTtcbn0pO1xuXG5jbG9zZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZC1tb2RhbCcpO1xuICBtb2RhbFdpbmRvd0JhY2tncm91bmQuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQtbW9kYWwnKTtcbn0pO1xuXG5tb2RhbFdpbmRvd0JhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIG1vZGFsV2luZG93LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkLW1vZGFsJyk7XG4gIG1vZGFsV2luZG93QmFja2dyb3VuZC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZC1tb2RhbCcpO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9