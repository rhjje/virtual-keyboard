(()=>{var n={273:()=>{var e=document.querySelector("body"),n=document.querySelectorAll(".side-key"),t=document.querySelectorAll(".side-key-rus"),s=document.querySelectorAll(".key"),a=document.querySelector(".keyboard"),o=document.querySelector(".textarea"),i=document.querySelector(".main");document.querySelector("div.dark-theme > label > input[type=checkbox]").addEventListener("change",(function(){s.forEach((function(e){e.classList.toggle("dark-theme-keys")})),n.forEach((function(e){e.classList.toggle("dark-theme-side-key")})),t.forEach((function(e){e.classList.toggle("dark-theme-side-key")})),a.classList.toggle("dark-theme-keyboard"),e.classList.toggle("dark-theme-bg"),i.classList.toggle("dark-theme-main"),o.classList.toggle("dark-theme-textarea")}))},753:()=>{var e=document.querySelector("div.info > img"),n=document.querySelector(".info-modal"),t=document.querySelector(".modal-background"),s=document.querySelector(".close>img");e.addEventListener("click",(function(){n.classList.remove("disabled-modal"),t.classList.remove("disabled-modal")})),s.addEventListener("click",(function(){n.classList.add("disabled-modal"),t.classList.add("disabled-modal")})),t.addEventListener("click",(function(){n.classList.add("disabled-modal"),t.classList.add("disabled-modal")}))},84:()=>{window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;var n=new SpeechRecognition;n.interimResults=!0,n.continuous=!0,n.lang="en-gb",document.querySelector("div.key.win").addEventListener("click",(function(){languageEnglish?n.lang="en-gb":n.lang="ru"})),n.addEventListener("result",(function(){var n=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");textarea.value=n}));var t=document.querySelector(".microphone > img");t.addEventListener("click",(function(){t.classList.contains("off")?(t.src="assets/icons/microphone.svg",t.classList.remove("off"),n.start()):(n.stop(),t.src="assets/icons/microphone-off.svg",t.classList.add("off"))}))},669:()=>{var e=document.querySelector(".keyboard");document.querySelector("input[type=checkbox]").addEventListener("change",(function(n){n.target.checked?e.classList.remove("keyboard-off"):e.classList.add("keyboard-off")}))}},t={};function s(e){if(t[e])return t[e].exports;var a=t[e]={exports:{}};return n[e](a,a.exports,s),a.exports}(()=>{"use strict";function e(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var n=function(){function n(e,t,s,a){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.main=e,this.side=t,this.mainRus=s,this.sideRus=a}var t,s;return t=n,(s=[{key:"render",value:function(){return'\n      <div class="key">\n        <span class="side-key">'.concat(this.side,'</span>\n        <span class="main-key">').concat(this.main,'</span>\n        <span class="side-key-rus disabled">').concat(this.sideRus,'</span>\n        <span class="main-key-rus disabled">').concat(this.mainRus,"</span>\n      </div>")}}])&&e(t.prototype,s),n}();function t(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=n}var n,s;return n=e,(s=[{key:"render",value:function(){return'\n      <div class="key '.concat(this.content.toLowerCase(),'">\n        <span>').concat(this.content,"</span>\n      </div>")}}])&&t(n.prototype,s),e}(),o=[["~","!","@","#","$","%","^","&","*","(",")","_","+","|","Backspace"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","Delete"],["CapsLock","A","S","D","F","G","H","J","K","L",":",'"',"Enter"],["Shift","Z","X","C","V","B","N","M","<",">","?","Up","Shift"],["Ctrl","Win","Alt","Space","Alt","Left","Down","Right","Ctrl"]],i=[["`","1","2","3","4","5","6","7","8","9","0","-","=","\\",null],[null,"q","w","e","r","t","y","u","i","o","p","[","]",null],[null,"a","s","d","f","g","h","j","k","l",";","'",null],[null,"z","x","c","v","b","n","m",",",".","/",null]],c=[["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","/",null],[null,"Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ",null],[null,"Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э",null],[null,"Я","Ч","С","М","И","Т","Ь","Б","Ю",",",null]],l=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","\\",null],[null,"й","ц","у","к","е","н","г","ш","щ","з","х","ъ",null],[null,"ф","ы","в","а","п","р","о","л","д","ж","э",null],[null,"я","ч","с","м","и","т","ь","б","ю",".",null]];!function(){var e=document.createElement("div");e.classList.add("keyboard","keyboard-off");for(var t=0;t<o.length;t+=1){var s=document.createElement("div");switch(t){case 0:s.classList.add("keyboard__row-first");break;case 1:s.classList.add("keyboard__row-second");break;case 2:s.classList.add("keyboard__row-third");break;case 3:s.classList.add("keyboard__row-fourth");break;case 4:s.classList.add("keyboard__row-fifth")}for(var r=0;r<o[t].length;r+=1)if(1===o[t][r].length){var u=new n(i[t][r],o[t][r],l[t][r],c[t][r]);s.innerHTML+=u.render()}else if("Win"===o[t][r])s.innerHTML+='\n          <div class="key win">\n            <span>Win</span>\n            <span class="language-side">Ru</span>\n            <span class="language">En</span>\n          </div>';else{var d=new a(o[t][r]);s.innerHTML+=d.render()}e.appendChild(s)}document.querySelector(".main").appendChild(e)}();var r=document.querySelector(".textarea"),u=document.querySelectorAll(".key"),d={sound:!0,shift:!1,englishLayout:!0},f=new Audio("assets/sounds/simple.wav"),y=new Audio("assets/sounds/key.wav"),v=new Audio("assets/sounds/key-simple-rus.wav"),g=new Audio("assets/sounds/key-rus.wav"),k=function(){document.querySelectorAll(".key").forEach((function(e){if(e.querySelector(".side-key")){var n=e.querySelector(".side-key"),t=e.querySelector(".main-key"),s=e.querySelector(".side-key-rus"),a=e.querySelector(".main-key-rus"),o=[n.innerHTML,t.innerHTML];t.innerHTML=o[0],n.innerHTML=o[1];var i=[s.innerHTML,a.innerHTML];a.innerHTML=i[0],s.innerHTML=i[1]}}))},m=function(){var e=document.querySelectorAll(".key");e[42].classList.toggle("active"),e[54].classList.toggle("active"),e[42].classList.contains("active")&&e[54].classList.contains("active")?d.shift=!0:d.shift=!1},h=function(e){r.setRangeText("".concat(e),r.selectionStart,r.selectionEnd,"end"),r.focus()},L=function(e){r.setRangeText(e,r.selectionStart,r.selectionEnd,"end"),r.focus()},S=function(){d.englishLayout?y.play():g.play()};u.forEach((function(e){e.addEventListener("click",(function(n){switch(n.target.innerText){case"Ru":case"En":case"Win":d.sound&&g.play(),function(){var e=document.querySelectorAll(".side-key"),n=document.querySelectorAll(".main-key"),t=document.querySelectorAll(".side-key-rus"),s=document.querySelectorAll(".main-key-rus"),a=document.querySelector(".language"),o=document.querySelector(".language-side"),i=[o.innerText,a.innerText];a.innerText=i[0],o.innerText=i[1];for(var c=0;c<e.length;c+=1)e[c].classList.toggle("disabled"),n[c].classList.toggle("disabled"),t[c].classList.toggle("disabled"),s[c].classList.toggle("disabled");d.englishLayout?d.englishLayout=!1:d.englishLayout=!0}();break;case"Tab":d.sound&&S(),h("    ");break;case"Backspace":d.sound&&S(),a=r.value.slice(0,r.selectionStart),o=r.value.slice(r.selectionEnd),i=r.selectionStart,r.value=a.slice(0,-1)+o,r.focus(),i>0?r.setSelectionRange(i-1,i-1):r.setSelectionRange(i,i);break;case"Delete":d.sound&&S(),function(){var e=r.value.slice(0,r.selectionStart),n=r.value.slice(r.selectionEnd),t=r.selectionStart;r.value=e+n.slice(1),r.focus(),r.value.length,r.setSelectionRange(t,t)}();break;case"CapsLock":d.sound&&S(),k(),e.classList.toggle("active");break;case"Enter":d.sound&&S(),h("\n");break;case"Shift":d.sound&&S(),k(),m();break;case"Ctrl":case"Alt":d.sound&&S();break;case"Space":d.sound&&(d.englishLayout?f.play():v.play()),h(" ");break;case"Left":d.sound&&S(),function(){var e=r.selectionStart;r.focus(),e>0?r.setSelectionRange(e-1,e-1):r.setSelectionRange(e,e)}();break;case"Right":d.sound&&S(),function(){var e=r.selectionStart;r.focus(),e<r.value.length?r.setSelectionRange(e+1,e+1):r.setSelectionRange(e,e)}();break;case"Up":d.sound&&S(),function(){var e=r.selectionStart;if(r.focus(),e>0){var n=r.value.slice(0,r.selectionStart).length;r.setSelectionRange(e-n,e-n)}else r.setSelectionRange(e,e)}();break;case"Down":d.sound&&S(),function(){var e=r.selectionStart;if(r.focus(),e<r.value.length){var n=r.value.slice(r.selectionEnd).length;r.setSelectionRange(e+n,e+n)}else r.setSelectionRange(e,e)}();break;default:if(d.englishLayout){d.sound&&f.play();var t=e.querySelector(".main-key");L(t.innerText)}else{d.sound&&v.play();var s=e.querySelector(".main-key-rus");L(s.innerText)}d.shift&&(k(),m(),d.shift=!1)}var a,o,i}))}));var p=[192,49,50,51,52,53,54,55,56,57,48,189,187,220,8,9,81,87,69,82,84,89,85,73,79,80,219,221,46,20,65,83,68,70,71,72,74,75,76,186,222,13,16,90,88,67,86,66,78,77,188,190,191,38,16,17,null,18,32,18,37,40,39,17];r.addEventListener("keydown",(function(e){for(var n=0;n<p.length;n+=1){if(e.keyCode===p[n]&&(42===n||55===n||57===n)&&1===e.location){u[n].classList.add("active");break}if(e.keyCode===p[n]&&(54===n||59===n||63===n)&&2===e.location){u[n].classList.add("active");break}e.keyCode===p[n]&&0===e.location&&u[n].classList.add("active")}})),r.addEventListener("keyup",(function(e){for(var n=0;n<p.length;n+=1)e.keyCode===p[n]&&u[n].classList.remove("active")}));var b=document.querySelector(".sound > img");b.addEventListener("click",(function(){b.classList.contains("off")?(b.src="assets/icons/volume.svg",d.sound=!0):(b.src="assets/icons/volume-off.svg",d.sound=!1),b.classList.toggle("off")})),s(273),s(84),s(753),s(669)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvZGFyay10aGVtZS5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL3NwZWVjaC5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvdHVybktleWJvYXJkLmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvY29tcG9uZW50cy9tYWluS2V5LmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC8uL3NyYy9qcy9jb21wb25lbnRzL3NpZGVLZXkuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL2NvbXBvbmVudHMva2V5Ym9hcmQuanMiLCJ3ZWJwYWNrOi8vdmlydWFsLWtleWJvYXJkLy4vc3JjL2pzL3NjcmlwdC5qcyIsIndlYnBhY2s6Ly92aXJ1YWwta2V5Ym9hcmQvLi9zcmMvanMvcmVhbEtleWJvYXJkLmpzIiwid2VicGFjazovL3ZpcnVhbC1rZXlib2FyZC8uL3NyYy9qcy90dXJuU291bmQuanMiXSwibmFtZXMiOlsiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNpZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2lkZVJ1cyIsImtleXMiLCJrZXlib2FyZCIsInRleHRhcmVhIiwibWFpbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JFYWNoIiwia2V5IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibW9kYWxXaW5kb3dCdXR0b24iLCJtb2RhbFdpbmRvdyIsIm1vZGFsV2luZG93QmFja2dyb3VuZCIsImNsb3NlTW9kYWxCdXR0b24iLCJyZW1vdmUiLCJhZGQiLCJ3aW5kb3ciLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwicmVjIiwiaW50ZXJpbVJlc3VsdHMiLCJjb250aW51b3VzIiwibGFuZyIsImxhbmd1YWdlRW5nbGlzaCIsInRleHQiLCJBcnJheSIsImZyb20iLCJlIiwicmVzdWx0cyIsIm1hcCIsInJlc3VsdCIsInRyYW5zY3JpcHQiLCJqb2luIiwidmFsdWUiLCJtaWNyb3Bob25lQnV0dG9uIiwiY29udGFpbnMiLCJzcmMiLCJzdGFydCIsInN0b3AiLCJldmVudCIsInRhcmdldCIsImNoZWNrZWQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIk1haW5LZXkiLCJtYWluUnVzIiwidGhpcyIsIlNpZGVLZXkiLCJjb250ZW50IiwidG9Mb3dlckNhc2UiLCJzaWRlS2V5cyIsIm1haW5LZXlzIiwic2lkZUtleXNSdXMiLCJtYWluS2V5c1J1cyIsImNyZWF0ZUVsZW1lbnQiLCJpIiwibGVuZ3RoIiwicm93IiwiaiIsImlubmVySFRNTCIsInJlbmRlciIsImFwcGVuZENoaWxkIiwiY3JlYXRlS2V5Ym9hcmQiLCJzdGF0ZSIsInNvdW5kIiwic2hpZnQiLCJlbmdsaXNoTGF5b3V0IiwiYXVkaW9TaW1wbGUiLCJBdWRpbyIsImF1ZGlvIiwiYXVkaW9TaW1wbGVSdXMiLCJhdWRpb1J1cyIsImNoYW5nZUNhc2UiLCJzaWRlS2V5IiwibWFpbktleSIsInNpZGVLZXlSdXMiLCJtYWluS2V5UnVzIiwia2V5c0FsbCIsInNldFNwYWNlIiwic3BhY2UiLCJzZXRSYW5nZVRleHQiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsImZvY3VzIiwid3JpdGVMZXR0ZXIiLCJjaGFyIiwicGxheVNwZWNpYWxTb3VuZCIsInBsYXkiLCJpbm5lclRleHQiLCJsYW5ndWFnZSIsImxhbmd1YWdlU2lkZSIsImNoYW5nZUxhbmd1YWdlIiwiZmlyc3RTdHJpbmciLCJzbGljZSIsInNlY29uZFN0cmluZyIsInBvc2l0aW9uRm9jdXMiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImRlbGV0ZUJ1dHRvbiIsImxlZnQiLCJyaWdodCIsImNvdW50IiwidXAiLCJkb3duIiwic3BhbiIsImtleXNLZXlDb2RlIiwia2V5Q29kZSIsImxvY2F0aW9uIiwic291bmRCdXR0b24iXSwibWFwcGluZ3MiOiJzQkFBQSxJQUFNQSxFQUFPQyxTQUFTQyxjQUFjLFFBQzlCQyxFQUFPRixTQUFTRyxpQkFBaUIsYUFDakNDLEVBQVVKLFNBQVNHLGlCQUFpQixpQkFDcENFLEVBQU9MLFNBQVNHLGlCQUFpQixRQUNqQ0csRUFBV04sU0FBU0MsY0FBYyxhQUNsQ00sRUFBV1AsU0FBU0MsY0FBYyxhQUNsQ08sRUFBT1IsU0FBU0MsY0FBYyxTQUVwQ0QsU0FBU0MsY0FBYyxpREFBaURRLGlCQUFpQixVQUFVLFdBQ2pHSixFQUFLSyxTQUFRLFNBQUNDLEdBQ1pBLEVBQUlDLFVBQVVDLE9BQU8sc0JBR3ZCWCxFQUFLUSxTQUFRLFNBQUNDLEdBQ1pBLEVBQUlDLFVBQVVDLE9BQU8sMEJBR3ZCVCxFQUFRTSxTQUFRLFNBQUNDLEdBQ2ZBLEVBQUlDLFVBQVVDLE9BQU8sMEJBR3ZCUCxFQUFTTSxVQUFVQyxPQUFPLHVCQUMxQmQsRUFBS2EsVUFBVUMsT0FBTyxpQkFDdEJMLEVBQUtJLFVBQVVDLE9BQU8sbUJBQ3RCTixFQUFTSyxVQUFVQyxPQUFPLDJCLFNDeEI1QixJQUFNQyxFQUFvQmQsU0FBU0MsY0FBYyxrQkFDM0NjLEVBQWNmLFNBQVNDLGNBQWMsZUFDckNlLEVBQXdCaEIsU0FBU0MsY0FBYyxxQkFDL0NnQixFQUFtQmpCLFNBQVNDLGNBQWMsY0FFaERhLEVBQWtCTCxpQkFBaUIsU0FBUyxXQUMxQ00sRUFBWUgsVUFBVU0sT0FBTyxrQkFDN0JGLEVBQXNCSixVQUFVTSxPQUFPLHFCQUd6Q0QsRUFBaUJSLGlCQUFpQixTQUFTLFdBQ3pDTSxFQUFZSCxVQUFVTyxJQUFJLGtCQUMxQkgsRUFBc0JKLFVBQVVPLElBQUkscUJB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bnRlbnQiOlsiY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbmNvbnN0IHNpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1rZXknKTtcbmNvbnN0IHNpZGVSdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1rZXktcnVzJyk7XG5jb25zdCBrZXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuY29uc3Qga2V5Ym9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcua2V5Ym9hcmQnKTtcbmNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHRhcmVhJyk7XG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmRhcmstdGhlbWUgPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3hdJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGtleS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLWtleXMnKTtcbiAgfSk7XG5cbiAgc2lkZS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBrZXkuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1zaWRlLWtleScpO1xuICB9KTtcblxuICBzaWRlUnVzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGtleS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLXNpZGUta2V5Jyk7XG4gIH0pO1xuXG4gIGtleWJvYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2RhcmstdGhlbWUta2V5Ym9hcmQnKTtcbiAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLXRoZW1lLWJnJyk7XG4gIG1haW4uY2xhc3NMaXN0LnRvZ2dsZSgnZGFyay10aGVtZS1tYWluJyk7XG4gIHRleHRhcmVhLmNsYXNzTGlzdC50b2dnbGUoJ2RhcmstdGhlbWUtdGV4dGFyZWEnKTtcbn0pO1xuIiwiY29uc3QgbW9kYWxXaW5kb3dCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuaW5mbyA+IGltZycpO1xuY29uc3QgbW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby1tb2RhbCcpO1xuY29uc3QgbW9kYWxXaW5kb3dCYWNrZ3JvdW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJhY2tncm91bmQnKTtcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2U+aW1nJyk7XG5cbm1vZGFsV2luZG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZC1tb2RhbCcpO1xuICBtb2RhbFdpbmRvd0JhY2tncm91bmQuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQtbW9kYWwnKTtcbn0pO1xuXG5jbG9zZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZC1tb2RhbCcpO1xuICBtb2RhbFdpbmRvd0JhY2tncm91bmQuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQtbW9kYWwnKTtcbn0pO1xuXG5tb2RhbFdpbmRvd0JhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIG1vZGFsV2luZG93LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkLW1vZGFsJyk7XG4gIG1vZGFsV2luZG93QmFja2dyb3VuZC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZC1tb2RhbCcpO1xufSk7XG4iLCJ3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24gPSB3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24gfHwgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uO1xuXG5jb25zdCByZWMgPSBuZXcgU3BlZWNoUmVjb2duaXRpb24oKTtcbnJlYy5pbnRlcmltUmVzdWx0cyA9IHRydWU7XG5yZWMuY29udGludW91cyA9IHRydWU7XG5yZWMubGFuZyA9ICdlbi1nYic7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5rZXkud2luJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGlmIChsYW5ndWFnZUVuZ2xpc2gpIHtcbiAgICByZWMubGFuZyA9ICdlbi1nYic7XG4gIH0gZWxzZSB7XG4gICAgcmVjLmxhbmcgPSAncnUnO1xuICB9XG59KTtcblxucmVjLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VsdCcsICgpID0+IHtcbiAgY29uc3QgdGV4dCA9IEFycmF5LmZyb20oZS5yZXN1bHRzKVxuICAgIC5tYXAocmVzdWx0ID0+IHJlc3VsdFswXSlcbiAgICAubWFwKHJlc3VsdCA9PiByZXN1bHQudHJhbnNjcmlwdClcbiAgICAuam9pbignJyk7XG4gIHRleHRhcmVhLnZhbHVlID0gdGV4dDtcbn0pO1xuXG5jb25zdCBtaWNyb3Bob25lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1pY3JvcGhvbmUgPiBpbWcnKTtcbm1pY3JvcGhvbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGlmIChtaWNyb3Bob25lQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnb2ZmJykpIHtcbiAgICBtaWNyb3Bob25lQnV0dG9uLnNyYyA9ICdhc3NldHMvaWNvbnMvbWljcm9waG9uZS5zdmcnO1xuICAgIG1pY3JvcGhvbmVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb2ZmJyk7XG4gICAgcmVjLnN0YXJ0KCk7XG4gIH0gZWxzZSB7XG4gICAgcmVjLnN0b3AoKTtcbiAgICBtaWNyb3Bob25lQnV0dG9uLnNyYyA9ICdhc3NldHMvaWNvbnMvbWljcm9waG9uZS1vZmYuc3ZnJztcbiAgICBtaWNyb3Bob25lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29mZicpO1xuICB9XG59KTtcbiIsImNvbnN0IGtleWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkJyk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuICAgIGtleWJvYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2tleWJvYXJkLW9mZicpO1xuICB9IGVsc2Uge1xuICAgIGtleWJvYXJkLmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkLW9mZicpO1xuICB9XG59KTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpbktleSB7XG4gIGNvbnN0cnVjdG9yKG1haW4sIHNpZGUsIG1haW5SdXMsIHNpZGVSdXMpIHtcbiAgICB0aGlzLm1haW4gPSBtYWluO1xuICAgIHRoaXMuc2lkZSA9IHNpZGU7XG4gICAgdGhpcy5tYWluUnVzID0gbWFpblJ1cztcbiAgICB0aGlzLnNpZGVSdXMgPSBzaWRlUnVzO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwia2V5XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic2lkZS1rZXlcIj4ke3RoaXMuc2lkZX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwibWFpbi1rZXlcIj4ke3RoaXMubWFpbn08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic2lkZS1rZXktcnVzIGRpc2FibGVkXCI+JHt0aGlzLnNpZGVSdXN9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cIm1haW4ta2V5LXJ1cyBkaXNhYmxlZFwiPiR7dGhpcy5tYWluUnVzfTwvc3Bhbj5cbiAgICAgIDwvZGl2PmA7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpZGVLZXkge1xuICBjb25zdHJ1Y3Rvcihjb250ZW50KSB7XG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImtleSAke3RoaXMuY29udGVudC50b0xvd2VyQ2FzZSgpfVwiPlxuICAgICAgICA8c3Bhbj4ke3RoaXMuY29udGVudH08L3NwYW4+XG4gICAgICA8L2Rpdj5gO1xuICB9XG59XG4iLCJpbXBvcnQgTWFpbktleSBmcm9tICcuL21haW5LZXknO1xuaW1wb3J0IFNpZGVLZXkgZnJvbSAnLi9zaWRlS2V5JztcblxuY29uc3Qgc2lkZUtleXMgPSBbXG4gIFsnficsICchJywgJ0AnLCAnIycsICckJywgJyUnLCAnXicsICcmJywgJyonLCAnKCcsICcpJywgJ18nLCAnKycsICd8JywgJ0JhY2tzcGFjZSddLFxuICBbJ1RhYicsICdRJywgJ1cnLCAnRScsICdSJywgJ1QnLCAnWScsICdVJywgJ0knLCAnTycsICdQJywgJ3snLCAnfScsICdEZWxldGUnXSxcbiAgWydDYXBzTG9jaycsICdBJywgJ1MnLCAnRCcsICdGJywgJ0cnLCAnSCcsICdKJywgJ0snLCAnTCcsICc6JywgJ1wiJywgJ0VudGVyJ10sXG4gIFsnU2hpZnQnLCAnWicsICdYJywgJ0MnLCAnVicsICdCJywgJ04nLCAnTScsICc8JywgJz4nLCAnPycsICdVcCcsICdTaGlmdCddLFxuICBbJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnTGVmdCcsICdEb3duJywgJ1JpZ2h0JywgJ0N0cmwnXSxcbl07XG5cbmNvbnN0IG1haW5LZXlzID0gW1xuICBbJ2AnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLCAnXFxcXCcsIG51bGxdLFxuICBbbnVsbCwgJ3EnLCAndycsICdlJywgJ3InLCAndCcsICd5JywgJ3UnLCAnaScsICdvJywgJ3AnLCAnWycsICddJywgbnVsbF0sXG4gIFtudWxsLCAnYScsICdzJywgJ2QnLCAnZicsICdnJywgJ2gnLCAnaicsICdrJywgJ2wnLCAnOycsICdcXCcnLCBudWxsXSxcbiAgW251bGwsICd6JywgJ3gnLCAnYycsICd2JywgJ2InLCAnbicsICdtJywgJywnLCAnLicsICcvJywgbnVsbF0sXG5dO1xuXG5jb25zdCBzaWRlS2V5c1J1cyA9IFtcbiAgWyfQgScsICchJywgJ1wiJywgJ+KElicsICc7JywgJyUnLCAnOicsICc/JywgJyonLCAnKCcsICcpJywgJ18nLCAnKycsICcvJywgbnVsbF0sXG4gIFtudWxsLCAn0JknLCAn0KYnLCAn0KMnLCAn0JonLCAn0JUnLCAn0J0nLCAn0JMnLCAn0KgnLCAn0KknLCAn0JcnLCAn0KUnLCAn0KonLCBudWxsXSxcbiAgW251bGwsICfQpCcsICfQqycsICfQkicsICfQkCcsICfQnycsICfQoCcsICfQnicsICfQmycsICfQlCcsICfQlicsICfQrScsIG51bGxdLFxuICBbbnVsbCwgJ9CvJywgJ9CnJywgJ9ChJywgJ9CcJywgJ9CYJywgJ9CiJywgJ9CsJywgJ9CRJywgJ9CuJywgJywnLCBudWxsXSxcbl07XG5cbmNvbnN0IG1haW5LZXlzUnVzID0gW1xuICBbJ9GRJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgJ1xcXFwnLCBudWxsXSxcbiAgW251bGwsICfQuScsICfRhicsICfRgycsICfQuicsICfQtScsICfQvScsICfQsycsICfRiCcsICfRiScsICfQtycsICfRhScsICfRiicsIG51bGxdLFxuICBbbnVsbCwgJ9GEJywgJ9GLJywgJ9CyJywgJ9CwJywgJ9C/JywgJ9GAJywgJ9C+JywgJ9C7JywgJ9C0JywgJ9C2JywgJ9GNJywgbnVsbF0sXG4gIFtudWxsLCAn0Y8nLCAn0YcnLCAn0YEnLCAn0LwnLCAn0LgnLCAn0YInLCAn0YwnLCAn0LEnLCAn0Y4nLCAnLicsIG51bGxdLFxuXTtcblxuY29uc3QgY3JlYXRlS2V5Ym9hcmQgPSAoKSA9PiB7XG4gIGNvbnN0IGtleWJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGtleWJvYXJkLmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkJywgJ2tleWJvYXJkLW9mZicpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpZGVLZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3dpdGNoIChpKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZF9fcm93LWZpcnN0Jyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX3Jvdy1zZWNvbmQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZF9fcm93LXRoaXJkJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX3Jvdy1mb3VydGgnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZF9fcm93LWZpZnRoJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaWRlS2V5c1tpXS5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgaWYgKHNpZGVLZXlzW2ldW2pdLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCBrZXkgPSBuZXcgTWFpbktleShtYWluS2V5c1tpXVtqXSwgc2lkZUtleXNbaV1bal0sXG4gICAgICAgICAgbWFpbktleXNSdXNbaV1bal0sIHNpZGVLZXlzUnVzW2ldW2pdKTtcbiAgICAgICAgcm93LmlubmVySFRNTCArPSBrZXkucmVuZGVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHNpZGVLZXlzW2ldW2pdID09PSAnV2luJykge1xuICAgICAgICBjb25zdCBrZXkgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImtleSB3aW5cIj5cbiAgICAgICAgICAgIDxzcGFuPldpbjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFuZ3VhZ2Utc2lkZVwiPlJ1PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYW5ndWFnZVwiPkVuPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PmA7XG4gICAgICAgIHJvdy5pbm5lckhUTUwgKz0ga2V5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmV3IFNpZGVLZXkoc2lkZUtleXNbaV1bal0pO1xuICAgICAgICByb3cuaW5uZXJIVE1MICs9IGtleS5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAga2V5Ym9hcmQuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJykuYXBwZW5kQ2hpbGQoa2V5Ym9hcmQpO1xufTtcblxuY3JlYXRlS2V5Ym9hcmQoKTtcbiIsImV4cG9ydCBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0YXJlYScpO1xuZXhwb3J0IGNvbnN0IGtleXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcua2V5Jyk7XG5cbmV4cG9ydCBjb25zdCBzdGF0ZSA9IHtcbiAgc291bmQ6IHRydWUsXG4gIHNoaWZ0OiBmYWxzZSxcbiAgZW5nbGlzaExheW91dDogdHJ1ZSxcbn07XG5cbmNvbnN0IGF1ZGlvU2ltcGxlID0gbmV3IEF1ZGlvKCdhc3NldHMvc291bmRzL3NpbXBsZS53YXYnKTtcbmNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKCdhc3NldHMvc291bmRzL2tleS53YXYnKTtcbmNvbnN0IGF1ZGlvU2ltcGxlUnVzID0gbmV3IEF1ZGlvKCdhc3NldHMvc291bmRzL2tleS1zaW1wbGUtcnVzLndhdicpO1xuY29uc3QgYXVkaW9SdXMgPSBuZXcgQXVkaW8oJ2Fzc2V0cy9zb3VuZHMva2V5LXJ1cy53YXYnKTtcblxuY29uc3QgY2hhbmdlTGFuZ3VhZ2UgPSAoKSA9PiB7XG4gIGNvbnN0IHNpZGVLZXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUta2V5Jyk7XG4gIGNvbnN0IG1haW5LZXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4ta2V5Jyk7XG4gIGNvbnN0IHNpZGVLZXlzUnVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUta2V5LXJ1cycpO1xuICBjb25zdCBtYWluS2V5c1J1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLWtleS1ydXMnKTtcblxuICBjb25zdCBsYW5ndWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sYW5ndWFnZScpO1xuICBjb25zdCBsYW5ndWFnZVNpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFuZ3VhZ2Utc2lkZScpO1xuICBbbGFuZ3VhZ2UuaW5uZXJUZXh0LCBsYW5ndWFnZVNpZGUuaW5uZXJUZXh0XSA9IFtsYW5ndWFnZVNpZGUuaW5uZXJUZXh0LCBsYW5ndWFnZS5pbm5lclRleHRdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2lkZUtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBzaWRlS2V5c1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpO1xuICAgIG1haW5LZXlzW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJyk7XG4gICAgc2lkZUtleXNSdXNbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKTtcbiAgICBtYWluS2V5c1J1c1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpO1xuICB9XG4gIGlmIChzdGF0ZS5lbmdsaXNoTGF5b3V0KSB7XG4gICAgc3RhdGUuZW5nbGlzaExheW91dCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHN0YXRlLmVuZ2xpc2hMYXlvdXQgPSB0cnVlO1xuICB9XG59O1xuXG5jb25zdCBiYWNrc3BhY2UgPSAoKSA9PiB7XG4gIGNvbnN0IGZpcnN0U3RyaW5nID0gdGV4dGFyZWEudmFsdWUuc2xpY2UoMCwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQpO1xuICBjb25zdCBzZWNvbmRTdHJpbmcgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSh0ZXh0YXJlYS5zZWxlY3Rpb25FbmQpO1xuICBjb25zdCBwb3NpdGlvbkZvY3VzID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG5cbiAgdGV4dGFyZWEudmFsdWUgPSBmaXJzdFN0cmluZy5zbGljZSgwLCAtMSkgKyBzZWNvbmRTdHJpbmc7XG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzID4gMCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMgLSAxLCBwb3NpdGlvbkZvY3VzIC0gMSk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IGRlbGV0ZUJ1dHRvbiA9ICgpID0+IHtcbiAgY29uc3QgZmlyc3RTdHJpbmcgPSB0ZXh0YXJlYS52YWx1ZS5zbGljZSgwLCB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCk7XG4gIGNvbnN0IHNlY29uZFN0cmluZyA9IHRleHRhcmVhLnZhbHVlLnNsaWNlKHRleHRhcmVhLnNlbGVjdGlvbkVuZCk7XG4gIGNvbnN0IHBvc2l0aW9uRm9jdXMgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydDtcblxuICB0ZXh0YXJlYS52YWx1ZSA9IGZpcnN0U3RyaW5nICsgc2Vjb25kU3RyaW5nLnNsaWNlKDEpO1xuICB0ZXh0YXJlYS5mb2N1cygpO1xuICBpZiAocG9zaXRpb25Gb2N1cyA8IHRleHRhcmVhLnZhbHVlLmxlbmd0aCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9IGVsc2Uge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9XG59O1xuXG5jb25zdCBjaGFuZ2VDYXNlID0gKCkgPT4ge1xuICBjb25zdCBrZXlzQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuICBrZXlzQWxsLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChrZXkucXVlcnlTZWxlY3RvcignLnNpZGUta2V5JykpIHtcbiAgICAgIGNvbnN0IHNpZGVLZXkgPSBrZXkucXVlcnlTZWxlY3RvcignLnNpZGUta2V5Jyk7XG4gICAgICBjb25zdCBtYWluS2V5ID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleScpO1xuICAgICAgY29uc3Qgc2lkZUtleVJ1cyA9IGtleS5xdWVyeVNlbGVjdG9yKCcuc2lkZS1rZXktcnVzJyk7XG4gICAgICBjb25zdCBtYWluS2V5UnVzID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleS1ydXMnKTtcblxuICAgICAgW21haW5LZXkuaW5uZXJIVE1MLCBzaWRlS2V5LmlubmVySFRNTF0gPSBbc2lkZUtleS5pbm5lckhUTUwsIG1haW5LZXkuaW5uZXJIVE1MXTtcbiAgICAgIFttYWluS2V5UnVzLmlubmVySFRNTCwgc2lkZUtleVJ1cy5pbm5lckhUTUxdID0gW3NpZGVLZXlSdXMuaW5uZXJIVE1MLCBtYWluS2V5UnVzLmlubmVySFRNTF07XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IHNoaWZ0ID0gKCkgPT4ge1xuICBjb25zdCBrZXlzQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtleScpO1xuICBrZXlzQWxsWzQyXS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAga2V5c0FsbFs1NF0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gIGlmIChrZXlzQWxsWzQyXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIGtleXNBbGxbNTRdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICBzdGF0ZS5zaGlmdCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUuc2hpZnQgPSBmYWxzZTtcbiAgfVxufTtcblxuY29uc3QgbGVmdCA9ICgpID0+IHtcbiAgY29uc3QgcG9zaXRpb25Gb2N1cyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuXG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzID4gMCkge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMgLSAxLCBwb3NpdGlvbkZvY3VzIC0gMSk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IHJpZ2h0ID0gKCkgPT4ge1xuICBjb25zdCBwb3NpdGlvbkZvY3VzID0gdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgaWYgKHBvc2l0aW9uRm9jdXMgPCB0ZXh0YXJlYS52YWx1ZS5sZW5ndGgpIHtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzICsgMSwgcG9zaXRpb25Gb2N1cyArIDEpO1xuICB9IGVsc2Uge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9XG59O1xuXG5jb25zdCB1cCA9ICgpID0+IHtcbiAgY29uc3QgcG9zaXRpb25Gb2N1cyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuXG4gIHRleHRhcmVhLmZvY3VzKCk7XG4gIGlmIChwb3NpdGlvbkZvY3VzID4gMCkge1xuICAgIGNvbnN0IGNvdW50ID0gdGV4dGFyZWEudmFsdWUuc2xpY2UoMCwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQpLmxlbmd0aDtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbkZvY3VzIC0gY291bnQsIHBvc2l0aW9uRm9jdXMgLSBjb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cywgcG9zaXRpb25Gb2N1cyk7XG4gIH1cbn07XG5cbmNvbnN0IGRvd24gPSAoKSA9PiB7XG4gIGNvbnN0IHBvc2l0aW9uRm9jdXMgPSB0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydDtcblxuICB0ZXh0YXJlYS5mb2N1cygpO1xuICBpZiAocG9zaXRpb25Gb2N1cyA8IHRleHRhcmVhLnZhbHVlLmxlbmd0aCkge1xuICAgIGNvbnN0IGNvdW50ID0gdGV4dGFyZWEudmFsdWUuc2xpY2UodGV4dGFyZWEuc2VsZWN0aW9uRW5kKS5sZW5ndGg7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb25Gb2N1cyArIGNvdW50LCBwb3NpdGlvbkZvY3VzICsgY291bnQpO1xuICB9IGVsc2Uge1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHBvc2l0aW9uRm9jdXMsIHBvc2l0aW9uRm9jdXMpO1xuICB9XG59O1xuXG5jb25zdCBzZXRTcGFjZSA9IChzcGFjZSkgPT4ge1xuICB0ZXh0YXJlYS5zZXRSYW5nZVRleHQoYCR7c3BhY2V9YCwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsIHRleHRhcmVhLnNlbGVjdGlvbkVuZCwgJ2VuZCcpO1xuICB0ZXh0YXJlYS5mb2N1cygpO1xufTtcblxuY29uc3Qgd3JpdGVMZXR0ZXIgPSAoY2hhcikgPT4ge1xuICB0ZXh0YXJlYS5zZXRSYW5nZVRleHQoY2hhciwgdGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsIHRleHRhcmVhLnNlbGVjdGlvbkVuZCwgJ2VuZCcpO1xuICB0ZXh0YXJlYS5mb2N1cygpO1xufTtcblxuY29uc3QgcGxheVNvdW5kID0gKCkgPT4ge1xuICBpZiAoc3RhdGUuZW5nbGlzaExheW91dCkge1xuICAgIGF1ZGlvU2ltcGxlLnBsYXkoKTtcbiAgfSBlbHNlIHtcbiAgICBhdWRpb1NpbXBsZVJ1cy5wbGF5KCk7XG4gIH1cbn07XG5cbmNvbnN0IHBsYXlTcGVjaWFsU291bmQgPSAoKSA9PiB7XG4gIGlmIChzdGF0ZS5lbmdsaXNoTGF5b3V0KSB7XG4gICAgYXVkaW8ucGxheSgpO1xuICB9IGVsc2Uge1xuICAgIGF1ZGlvUnVzLnBsYXkoKTtcbiAgfVxufTtcblxua2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAga2V5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgc3dpdGNoIChldmVudC50YXJnZXQuaW5uZXJUZXh0KSB7XG4gICAgICBjYXNlICdSdSc6XG4gICAgICBjYXNlICdFbic6XG4gICAgICBjYXNlICdXaW4nOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIGF1ZGlvUnVzLnBsYXkoKTtcbiAgICAgICAgY2hhbmdlTGFuZ3VhZ2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdUYWInOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgc2V0U3BhY2UoJyAgICAnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdCYWNrc3BhY2UnOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgYmFja3NwYWNlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRGVsZXRlJzpcbiAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSBwbGF5U3BlY2lhbFNvdW5kKCk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NhcHNMb2NrJzpcbiAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSBwbGF5U3BlY2lhbFNvdW5kKCk7XG4gICAgICAgIGNoYW5nZUNhc2UoKTtcbiAgICAgICAga2V5LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSBwbGF5U3BlY2lhbFNvdW5kKCk7XG4gICAgICAgIHNldFNwYWNlKCdcXG4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTaGlmdCc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNwZWNpYWxTb3VuZCgpO1xuICAgICAgICBjaGFuZ2VDYXNlKCk7XG4gICAgICAgIHNoaWZ0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ3RybCc6XG4gICAgICBjYXNlICdBbHQnOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTcGFjZSc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNvdW5kKCk7XG4gICAgICAgIHNldFNwYWNlKCcgJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnTGVmdCc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNwZWNpYWxTb3VuZCgpO1xuICAgICAgICBsZWZ0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnUmlnaHQnOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgcmlnaHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdVcCc6XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZCkgcGxheVNwZWNpYWxTb3VuZCgpO1xuICAgICAgICB1cCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0Rvd24nOlxuICAgICAgICBpZiAoc3RhdGUuc291bmQpIHBsYXlTcGVjaWFsU291bmQoKTtcbiAgICAgICAgZG93bigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzdGF0ZS5lbmdsaXNoTGF5b3V0KSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnNvdW5kKSB7XG4gICAgICAgICAgICBhdWRpb1NpbXBsZS5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNwYW4gPSBrZXkucXVlcnlTZWxlY3RvcignLm1haW4ta2V5Jyk7XG4gICAgICAgICAgd3JpdGVMZXR0ZXIoc3Bhbi5pbm5lclRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdGF0ZS5zb3VuZCkge1xuICAgICAgICAgICAgYXVkaW9TaW1wbGVSdXMucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzcGFuID0ga2V5LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWtleS1ydXMnKTtcbiAgICAgICAgICB3cml0ZUxldHRlcihzcGFuLmlubmVyVGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhdGUuc2hpZnQpIHtcbiAgICAgICAgICBjaGFuZ2VDYXNlKCk7XG4gICAgICAgICAgc2hpZnQoKTtcbiAgICAgICAgICBzdGF0ZS5zaGlmdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG59KTtcbiIsImltcG9ydCB7IHRleHRhcmVhLCBrZXlzIH0gZnJvbSAnLi9zY3JpcHQnO1xuXG5jb25zdCBrZXlzS2V5Q29kZSA9IFsxOTIsIDQ5LCA1MCwgNTEsIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDQ4LCAxODksIDE4NywgMjIwLFxuICA4LCA5LCA4MSwgODcsIDY5LCA4MiwgODQsIDg5LCA4NSwgNzMsIDc5LCA4MCwgMjE5LCAyMjEsIDQ2LCAyMCwgNjUsIDgzLCA2OCxcbiAgNzAsIDcxLCA3MiwgNzQsIDc1LCA3NiwgMTg2LCAyMjIsIDEzLCAxNiwgOTAsIDg4LCA2NywgODYsIDY2LCA3OCwgNzcsIDE4OCxcbiAgMTkwLCAxOTEsIDM4LCAxNiwgMTcsIG51bGwsIDE4LCAzMiwgMTgsIDM3LCA0MCwgMzksIDE3XTtcblxudGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXNLZXlDb2RlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleXNLZXlDb2RlW2ldICYmIChpID09PSA0MiB8fCBpID09PSA1NSB8fCBpID09PSA1NylcbiAgICAmJiBldmVudC5sb2NhdGlvbiA9PT0gMSkge1xuICAgICAga2V5c1tpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5c0tleUNvZGVbaV0gJiYgKGkgPT09IDU0IHx8IGkgPT09IDU5IHx8IGkgPT09IDYzKVxuICAgICYmIGV2ZW50LmxvY2F0aW9uID09PSAyKSB7XG4gICAgICBrZXlzW2ldLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSBrZXlzS2V5Q29kZVtpXSAmJiBldmVudC5sb2NhdGlvbiA9PT0gMCkge1xuICAgICAga2V5c1tpXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cbn0pO1xuXG50ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXNLZXlDb2RlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleXNLZXlDb2RlW2ldKSB7XG4gICAgICBrZXlzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxufSk7XG4iLCJpbXBvcnQgeyBzdGF0ZSB9IGZyb20gJy4vc2NyaXB0JztcblxuY29uc3Qgc291bmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291bmQgPiBpbWcnKTtcblxuc291bmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGlmIChzb3VuZEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29mZicpKSB7XG4gICAgc291bmRCdXR0b24uc3JjID0gJ2Fzc2V0cy9pY29ucy92b2x1bWUuc3ZnJztcbiAgICBzdGF0ZS5zb3VuZCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgc291bmRCdXR0b24uc3JjID0gJ2Fzc2V0cy9pY29ucy92b2x1bWUtb2ZmLnN2Zyc7XG4gICAgc3RhdGUuc291bmQgPSBmYWxzZTtcbiAgfVxuICBzb3VuZEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdvZmYnKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==